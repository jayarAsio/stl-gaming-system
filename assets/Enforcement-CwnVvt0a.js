import{r as l,j as e}from"./index-CYe3miYN.js";const R=()=>{const[n,v]=l.useState(""),[r,N]=l.useState("2025-10-11"),[t,x]=l.useState(null),[d,A]=l.useState("all"),[o,C]=l.useState("all"),[m,D]=l.useState("all"),p=[{id:1,timestamp:"2025-10-11 09:15:23",user:"Admin-GA001",role:"Game Administrator",action:"VOID_APPROVED",target:"Ticket #TIX-001234",ip:"192.168.1.100",status:"success",details:"Approved void request for ticket TIX-001234. Reason: Customer request. Amount: ₱500",deviceInfo:"Windows 10 - Chrome 118"},{id:2,timestamp:"2025-10-11 09:10:45",user:"Admin-GA002",role:"Game Administrator",action:"USER_CREATED",target:"Teller-T125",ip:"192.168.1.101",status:"success",details:"Created new teller account: T125 (Juan Dela Cruz) assigned to Manila Central outlet",deviceInfo:"Windows 11 - Edge 119"},{id:3,timestamp:"2025-10-11 09:05:12",user:"Admin-GA001",role:"Game Administrator",action:"DRAW_MODIFIED",target:"Draw #DRW-789",ip:"192.168.1.100",status:"success",details:"Modified draw schedule for SWER3 11:00 AM. Changed status from Pending to Active",deviceInfo:"Windows 10 - Chrome 118"},{id:4,timestamp:"2025-10-11 08:58:33",user:"Teller-T098",role:"Teller",action:"LOGIN_FAILED",target:"System",ip:"192.168.1.150",status:"failed",details:"Failed login attempt. Incorrect password (3rd attempt)",deviceInfo:"Android 13 - Chrome Mobile"},{id:5,timestamp:"2025-10-11 08:45:21",user:"Admin-GA003",role:"Game Administrator",action:"REPORT_GENERATED",target:"Sales Report - Oct 11",ip:"192.168.1.102",status:"success",details:"Generated daily sales report for October 11, 2025. Total records: 1,245",deviceInfo:"macOS 14 - Safari 17"},{id:6,timestamp:"2025-10-11 08:30:15",user:"Teller-T087",role:"Teller",action:"TICKET_VOIDED",target:"Ticket #TIX-001220",ip:"192.168.1.155",status:"success",details:"Voided ticket TIX-001220. Amount: ₱250. Reason: Duplicate entry",deviceInfo:"Windows 10 - Firefox 120"},{id:7,timestamp:"2025-10-11 08:15:42",user:"Admin-GA001",role:"Game Administrator",action:"CONFIG_CHANGED",target:"Game Settings - SWER3",ip:"192.168.1.100",status:"success",details:"Updated SWER3 configuration. Changed maximum bet limit from ₱10,000 to ₱15,000",deviceInfo:"Windows 10 - Chrome 118"},{id:8,timestamp:"2025-10-11 08:00:08",user:"Collector-C045",role:"Collector",action:"REMITTANCE_SUBMITTED",target:"Manila Central",ip:"192.168.1.175",status:"success",details:"Submitted daily remittance for Manila Central. Total amount: ₱125,450",deviceInfo:"iOS 17 - Safari Mobile"},{id:9,timestamp:"2025-10-11 07:45:30",user:"Admin-GA002",role:"Game Administrator",action:"USER_DISABLED",target:"Teller-T099",ip:"192.168.1.101",status:"success",details:"Disabled teller account T099 due to policy violation",deviceInfo:"Windows 11 - Edge 119"},{id:10,timestamp:"2025-10-11 07:30:15",user:"Teller-T112",role:"Teller",action:"TICKET_CREATED",target:"Ticket #TIX-001245",ip:"192.168.1.160",status:"success",details:"Created new ticket TIX-001245. Game: SWER3, Amount: ₱1,200, Numbers: 12-34-56",deviceInfo:"Windows 10 - Chrome 118"},{id:11,timestamp:"2025-10-11 07:15:22",user:"Admin-GA001",role:"Game Administrator",action:"DRAW_APPROVED",target:"Draw #DRW-790",ip:"192.168.1.100",status:"success",details:"Approved draw results for SWER3 9:00 AM. Winning numbers: 15-28-42",deviceInfo:"Windows 10 - Chrome 118"},{id:12,timestamp:"2025-10-11 07:00:05",user:"System",role:"System",action:"BACKUP_COMPLETED",target:"Database Backup",ip:"127.0.0.1",status:"success",details:"Automated database backup completed successfully. Size: 2.4 GB",deviceInfo:"Server - Automated Task"}],u=l.useMemo(()=>p.filter(s=>{const c=s.timestamp.split(" ")[0],h=s.user.toLowerCase().includes(n.toLowerCase())||s.action.toLowerCase().includes(n.toLowerCase())||s.target.toLowerCase().includes(n.toLowerCase())||s.ip.includes(n),i=c===r,f=d==="all"||s.action===d,a=o==="all"||s.status===o,S=m==="all"||s.role===m;return h&&i&&f&&a&&S}),[p,n,r,d,o,m]),T=()=>{const c=[["ID","Timestamp","User","Role","Action","Target","IP Address","Status","Details","Device Info"].join(","),...u.map(a=>[a.id,a.timestamp,a.user,a.role,a.action,`"${a.target}"`,a.ip,a.status,`"${a.details}"`,`"${a.deviceInfo}"`].join(","))].join(`
`),h=new Blob([c],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),f=URL.createObjectURL(h);i.setAttribute("href",f),i.setAttribute("download",`audit_logs_${r}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},E=(s,c)=>c==="failed"?"enf-log-failed":["USER_DISABLED","CONFIG_CHANGED","DRAW_MODIFIED"].includes(s)?"enf-log-critical":"enf-log-success",I=s=>{x(s)},j=()=>{x(null)};return e.jsxs("div",{className:"enf-container",children:[e.jsx("div",{className:"enf-header",children:e.jsxs("div",{className:"enf-header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"enf-title",children:"Enforcement & Security"}),e.jsx("p",{className:"enf-subtitle",children:"System audit logs and security monitoring"})]}),e.jsx("div",{className:"enf-header-actions",children:e.jsx("button",{className:"enf-export-btn-header",onClick:T,children:"📥 Export to CSV"})})]})}),e.jsxs("div",{className:"enf-filters-card",children:[e.jsxs("div",{className:"enf-filters",children:[e.jsxs("div",{className:"enf-search-wrapper",children:[e.jsx("input",{type:"text",className:"enf-search-input",placeholder:"Search by user, action, target, or IP address...",value:n,onChange:s=>v(s.target.value)}),e.jsx("span",{className:"enf-search-icon",children:"🔍"})]}),e.jsx("div",{className:"enf-date-filters",children:e.jsxs("div",{className:"enf-date-group",children:[e.jsx("label",{htmlFor:"selected-date",className:"enf-date-label",children:"Date"}),e.jsx("input",{id:"selected-date",type:"date",className:"enf-date-input",value:r,onChange:s=>N(s.target.value)})]})}),e.jsxs("select",{className:"enf-filter-select",value:d,onChange:s=>A(s.target.value),children:[e.jsx("option",{value:"all",children:"All Actions"}),e.jsx("option",{value:"VOID_APPROVED",children:"Void Approved"}),e.jsx("option",{value:"USER_CREATED",children:"User Created"}),e.jsx("option",{value:"USER_DISABLED",children:"User Disabled"}),e.jsx("option",{value:"DRAW_MODIFIED",children:"Draw Modified"}),e.jsx("option",{value:"DRAW_APPROVED",children:"Draw Approved"}),e.jsx("option",{value:"LOGIN_FAILED",children:"Login Failed"}),e.jsx("option",{value:"REPORT_GENERATED",children:"Report Generated"}),e.jsx("option",{value:"TICKET_VOIDED",children:"Ticket Voided"}),e.jsx("option",{value:"TICKET_CREATED",children:"Ticket Created"}),e.jsx("option",{value:"CONFIG_CHANGED",children:"Config Changed"}),e.jsx("option",{value:"REMITTANCE_SUBMITTED",children:"Remittance Submitted"}),e.jsx("option",{value:"BACKUP_COMPLETED",children:"Backup Completed"})]}),e.jsxs("select",{className:"enf-filter-select",value:o,onChange:s=>C(s.target.value),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{className:"enf-filter-select",value:m,onChange:s=>D(s.target.value),children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"Game Administrator",children:"Game Administrator"}),e.jsx("option",{value:"Teller",children:"Teller"}),e.jsx("option",{value:"Collector",children:"Collector"}),e.jsx("option",{value:"System",children:"System"})]})]}),e.jsxs("div",{className:"enf-results-count",children:["Showing ",e.jsx("strong",{children:u.length})," of ",e.jsx("strong",{children:p.length})," audit logs"]})]}),e.jsxs("div",{className:"enf-card",children:[e.jsx("h3",{className:"enf-card-title",children:"System Audit Logs"}),e.jsx("div",{className:"enf-table-wrapper",children:e.jsxs("table",{className:"enf-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Timestamp"}),e.jsx("th",{children:"User"}),e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Target"}),e.jsx("th",{children:"IP Address"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:u.length>0?u.map(s=>e.jsxs("tr",{className:E(s.action,s.status),children:[e.jsx("td",{className:"enf-td-time",children:s.timestamp}),e.jsx("td",{className:"enf-td-user",children:e.jsxs("div",{className:"enf-user-cell",children:[e.jsx("span",{className:"enf-user-name",children:s.user}),e.jsx("span",{className:"enf-user-role",children:s.role})]})}),e.jsx("td",{className:"enf-td-action",children:s.action.replace(/_/g," ")}),e.jsx("td",{children:s.target}),e.jsx("td",{className:"enf-td-ip",children:s.ip}),e.jsx("td",{children:e.jsx("span",{className:`enf-pill ${s.status==="success"?"enf-pill-success":"enf-pill-danger"}`,children:s.status})}),e.jsx("td",{children:e.jsx("button",{className:"enf-btn-view-small",onClick:()=>I(s),children:"View Info"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"enf-no-results",children:"No audit logs found matching your search criteria"})})})]})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"enf-drawer-overlay",onClick:j}),e.jsxs("div",{className:"enf-drawer",children:[e.jsxs("div",{className:"enf-drawer-header",children:[e.jsx("h3",{children:"Audit Log Details"}),e.jsx("button",{className:"enf-drawer-close",onClick:j,children:"×"})]}),e.jsxs("div",{className:"enf-drawer-content",children:[e.jsxs("div",{className:"enf-drawer-section",children:[e.jsx("h4",{children:"Log Information"}),e.jsxs("div",{className:"enf-detail-grid",children:[e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"Log ID"}),e.jsxs("span",{className:"enf-detail-value",children:["#",t.id]})]}),e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"Timestamp"}),e.jsx("span",{className:"enf-detail-value",children:t.timestamp})]}),e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"User"}),e.jsx("span",{className:"enf-detail-value",children:t.user})]}),e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"Role"}),e.jsx("span",{className:"enf-detail-value",children:t.role})]}),e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"Action"}),e.jsx("span",{className:"enf-detail-value",children:t.action.replace(/_/g," ")})]}),e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"Target"}),e.jsx("span",{className:"enf-detail-value",children:t.target})]}),e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"IP Address"}),e.jsx("span",{className:"enf-detail-value",children:t.ip})]}),e.jsxs("div",{className:"enf-detail-item",children:[e.jsx("span",{className:"enf-detail-label",children:"Status"}),e.jsx("span",{className:`enf-pill ${t.status==="success"?"enf-pill-success":"enf-pill-danger"}`,children:t.status})]}),e.jsxs("div",{className:"enf-detail-item",style:{gridColumn:"1 / -1"},children:[e.jsx("span",{className:"enf-detail-label",children:"Device Info"}),e.jsx("span",{className:"enf-detail-value",children:t.deviceInfo})]})]})]}),e.jsxs("div",{className:"enf-drawer-section",children:[e.jsx("h4",{children:"Details"}),e.jsx("p",{className:"enf-drawer-description",children:t.details})]})]})]})]})]})};export{R as default};
