import{r as t,j as e}from"./index-DVPZBxee.js";const T=52,K=8,je=()=>{const[l,N]=t.useState("STL Pares"),[j,v]=t.useState(""),[r,S]=t.useState(null),[o,C]=t.useState(!1),[n,d]=t.useState([]),[f,M]=t.useState(""),[A,b]=t.useState(!1),[k,p]=t.useState(!1),[O,X]=t.useState(!1),[L,V]=t.useState({show:!1,message:"",type:""}),$=t.useDeferredValue(j),[,W]=t.useTransition(),g=t.useMemo(()=>({"STL Pares":{name:"STL Pares",defaultLimit:2e3,numberRange:{min:1,max:40},format:"XX.XX",description:"Two-number combination game (01-40)"},"Last 2":{name:"Last 2",defaultLimit:1500,numberRange:{min:0,max:99},format:"XX",description:"Last two digits (00-99)"},"Last 3":{name:"Last 3",defaultLimit:1800,numberRange:{min:0,max:999},format:"XXX",description:"Last three digits (000-999)"},Swer3:{name:"Swer3",defaultLimit:2500,numberRange:{min:0,max:999},format:"XXX",description:"Three-digit game (000-999)"}}),[]),[w,E]=t.useState({"STL Pares":{"01.02":1e3,"02.01":1e3,"05.10":1500,"12.34":800,"20.30":1200},"Last 2":{"07":500,11:600,88:700},"Last 3":{123:900,777:1e3},Swer3:{369:1500}}),m=t.useMemo(()=>w[l]||{},[w,l]),I=t.useCallback(s=>{const i=[];if(s==="STL Pares")for(let a=1;a<=40;a++){const u=String(a).padStart(2,"0");for(let x=1;x<=40;x++)if(a!==x){const F=`${u}.${String(x).padStart(2,"0")}`;i.push(F)}}else if(s==="Last 2")for(let a=0;a<=99;a++)i.push(String(a).padStart(2,"0"));else if(s==="Last 3"||s==="Swer3")for(let a=0;a<=999;a++)i.push(String(a).padStart(3,"0"));return i},[]),B=t.useMemo(()=>I(l),[l,I]),R=t.useMemo(()=>{let s=B;if($){const i=$.trim();i&&(s=s.filter(a=>a.includes(i)))}return O&&(s=s.filter(i=>i in m)),s},[B,$,O,m]),P=t.useCallback(s=>s in m?m[s]:g[l].defaultLimit,[m,g,l]),_=t.useCallback(s=>s in m,[m]),D=t.useMemo(()=>Object.keys(m).length,[m]),c=t.useCallback((s,i="success")=>{V({show:!0,message:s,type:i}),window.setTimeout(()=>V({show:!1,message:"",type:""}),3e3)},[]),J=t.useCallback(s=>{S({combo:s,value:String(P(s))})},[P]),U=t.useCallback(()=>{if(!r)return;const s=parseInt(r.value,10);if(Number.isNaN(s)||s<0){c("Please enter a valid limit amount","error");return}E(i=>({...i,[l]:{...i[l]||{},[r.combo]:s}})),c(`Limit updated for ${r.combo}`,"success"),S(null)},[r,l,c]),Z=t.useCallback(s=>{E(i=>{const a={...i[l]||{}};return s in a&&delete a[s],{...i,[l]:a}}),c(`${s} reverted to default limit`,"success")},[l,c]),ee=t.useCallback(s=>{d(i=>i.includes(s)?i.filter(a=>a!==s):[...i,s])},[]),se=t.useMemo(()=>new Set(n),[n]),te=t.useCallback(()=>d(R.slice()),[R]),ae=t.useCallback(()=>d([]),[]),ie=t.useCallback(()=>{if(n.length===0){c("Please select at least one combination","error");return}b(!0)},[n,c]),le=t.useCallback(()=>{const s=parseInt(f,10);if(Number.isNaN(s)||s<0){c("Please enter a valid limit amount","error");return}p(!0),window.setTimeout(()=>{E(i=>{const a={...i},u={...a[l]||{}};for(const x of n)u[x]=s;return a[l]=u,a}),p(!1),b(!1),M(""),d([]),C(!1),c(`Bulk limit applied to ${n.length} combinations`,"success")},800)},[f,n,l,c]),ne=t.useCallback(()=>{window.confirm(`Reset all custom limits for ${l}? This will revert all combinations to the default limit of ₱${g[l].defaultLimit}.`)&&(E(s=>({...s,[l]:{}})),c("All custom limits have been reset","success"))},[l,g,c]),h=t.useRef(null),[ce,oe]=t.useState(520),[re,de]=t.useState(0);t.useEffect(()=>{const s=h.current;if(!s)return;const i=()=>{const u=s.clientHeight||520;oe(u)};i();const a=new ResizeObserver(i);return a.observe(s),()=>a.disconnect()},[]);const me=t.useCallback(s=>{de(s.currentTarget.scrollTop||0)},[]),y=R.length,he=Math.max(1,Math.ceil(ce/T)),G=Math.floor(re/T),z=Math.max(0,G-K),Q=Math.min(y,G+he+K),Y=z*T,q=Math.max(0,(y-Q)*T);return e.jsxs("div",{className:"config-container",children:[e.jsx("div",{className:"config-header",children:e.jsxs("div",{className:"config-header-content",children:[e.jsxs("div",{className:"config-header-text",children:[e.jsx("h1",{className:"config-title",children:"Game Configuration"}),e.jsx("p",{className:"config-subtitle",children:"Manage bet limits and game-specific settings"})]}),e.jsx("div",{className:"config-header-actions",children:D>0&&e.jsxs("button",{className:"config-action-btn reset",onClick:ne,children:[e.jsx("span",{children:"🔄"})," Reset All"]})})]})}),e.jsxs("div",{className:"config-card",children:[e.jsx("div",{className:"config-section-header",children:e.jsxs("h2",{className:"config-section-title",children:[e.jsx("span",{className:"config-icon",children:"🎮"}),"Select Game"]})}),e.jsx("div",{className:"game-grid",children:Object.values(g).map(s=>e.jsxs("div",{className:`game-card ${l===s.name?"active":""}`,onClick:()=>{W(()=>{N(s.name),v(""),d([]),C(!1),X(!1),h.current&&(h.current.scrollTop=0)})},children:[e.jsxs("div",{className:"game-card-header",children:[e.jsx("div",{className:"game-name",children:s.name}),e.jsx("div",{className:"game-format",children:s.format})]}),e.jsx("div",{className:"game-description",children:s.description}),e.jsxs("div",{className:"game-limit",children:[e.jsx("span",{className:"limit-label",children:"Default Limit:"}),e.jsxs("span",{className:"limit-value",children:["₱",s.defaultLimit.toLocaleString()]})]}),w[s.name]&&Object.keys(w[s.name]).length>0&&e.jsxs("div",{className:"game-override-badge",children:[Object.keys(w[s.name]).length," overrides"]})]},s.name))})]}),e.jsxs("div",{className:"config-card",children:[e.jsx("div",{className:"config-section-header",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"config-section-title",children:[e.jsx("span",{className:"config-icon",children:"⚙️"}),"Bet Limit Configuration - ",l]}),e.jsxs("div",{className:"config-meta",children:[e.jsxs("span",{className:"meta-item",children:[e.jsx("strong",{children:"Default Limit:"})," ₱",g[l].defaultLimit.toLocaleString()]}),e.jsxs("span",{className:"meta-item",children:[e.jsx("strong",{children:"Custom Limits:"})," ",D," combinations"]}),e.jsxs("span",{className:"meta-item",children:[e.jsx("strong",{children:"Total Combinations:"})," ",B.length]})]})]})}),e.jsxs("div",{className:"config-controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsxs("div",{className:"search-wrapper",children:[e.jsx("span",{className:"search-icon",children:"🔍"}),e.jsx("input",{type:"text",className:"search-input",placeholder:"Search combination number...",value:j,onChange:s=>v(s.target.value)})]}),e.jsxs("button",{className:`control-btn ${o?"active":""}`,onClick:()=>{C(!o),d([])},children:[e.jsx("span",{children:o?"✓":"☐"}),"Bulk Edit Mode"]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"control-btn secondary",onClick:te,children:"Select All Filtered"}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"control-btn secondary",onClick:ae,children:["Clear (",n.length,")"]}),e.jsxs("button",{className:"control-btn primary",onClick:ie,children:[e.jsx("span",{children:"✏️"}),"Apply Limit to Selected"]})]})]})]}),e.jsxs("div",{className:"filter-chips",children:[e.jsx("button",{className:`filter-chip ${O?"":"active"}`,onClick:()=>{X(!1),v(""),h.current&&(h.current.scrollTop=0)},children:"All Combinations"}),e.jsxs("button",{className:`filter-chip ${O?"active":""}`,onClick:()=>{X(!0),h.current&&(h.current.scrollTop=0)},children:["Show Overrides Only (",D,")"]})]})]}),e.jsxs("div",{className:"config-table-wrapper",children:[e.jsx("div",{ref:h,onScroll:me,style:{maxHeight:520,overflowY:"auto",overflowX:"hidden"},children:e.jsxs("table",{className:"config-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[o&&e.jsx("th",{className:"col-checkbox",children:"Select"}),e.jsx("th",{className:"col-combo",children:"Combination"}),e.jsx("th",{className:"col-limit",children:"Current Limit"}),e.jsx("th",{className:"col-status",children:"Status"}),e.jsx("th",{className:"col-actions",children:"Actions"})]})}),e.jsxs("tbody",{children:[Y>0&&e.jsx("tr",{style:{height:Y},children:e.jsx("td",{colSpan:o?5:4,style:{border:"none",padding:0}})}),y>0?R.slice(z,Q).map(s=>{const i=_(s),a=P(s),u=r?.combo===s,x=se.has(s);return e.jsx(ue,{combo:s,isOverridden:i,currentLimit:a,isEditing:u,isSelected:x,bulkEditMode:o,onToggleSelect:ee,onEdit:J,onSave:U,onCancel:()=>S(null),editingValue:r?.value||"",setEditingValue:F=>S(H=>H&&{...H,value:F}),onReset:Z},s)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:o?5:4,className:"no-results",children:['No combinations found matching "',j,'"']})}),q>0&&e.jsx("tr",{style:{height:q},children:e.jsx("td",{colSpan:o?5:4,style:{border:"none",padding:0}})})]})]})}),y>5e3&&e.jsxs("div",{className:"table-footer",children:["Virtualized view active — loaded ",y.toLocaleString()," combinations smoothly."]})]})]}),A&&e.jsx("div",{className:"modal-overlay",onClick:()=>b(!1),children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:[e.jsx("span",{children:"✏️"}),"Apply Bulk Limit"]}),e.jsx("button",{className:"modal-close",onClick:()=>b(!1),children:"✕"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"modal-info",children:["You are about to set a custom limit for ",e.jsx("strong",{children:n.length})," combination",n.length!==1?"s":"","."]}),e.jsxs("div",{className:"selected-combos-preview",children:[e.jsx("div",{className:"preview-label",children:"Selected Combinations:"}),e.jsxs("div",{className:"preview-list",children:[n.slice(0,20).map(s=>e.jsx("span",{className:"preview-chip",children:s},s)),n.length>20&&e.jsxs("span",{className:"preview-more",children:["+",n.length-20," more"]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"bulkLimit",className:"form-label",children:"New Limit Amount (₱)"}),e.jsx("input",{id:"bulkLimit",type:"number",className:"form-input",placeholder:"Enter limit amount",value:f,onChange:s=>M(s.target.value),min:"0"}),e.jsxs("div",{className:"form-hint",children:["Current default: ₱",g[l].defaultLimit.toLocaleString()]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn secondary",onClick:()=>b(!1),disabled:k,children:"Cancel"}),e.jsx("button",{className:"modal-btn primary",onClick:le,disabled:k||!f,children:k?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Applying..."]}):e.jsx(e.Fragment,{children:"Apply Limit"})})]})]})}),L.show&&e.jsxs("div",{className:`toast toast-${L.type}`,children:[e.jsx("span",{className:"toast-icon",children:L.type==="success"?"✓":L.type==="error"?"✕":"ℹ"}),e.jsx("span",{className:"toast-message",children:L.message})]})]})},ue=t.memo(function({combo:N,isOverridden:j,currentLimit:v,isEditing:r,isSelected:S,bulkEditMode:o,onToggleSelect:C,onEdit:n,onSave:d,onCancel:f,editingValue:M,setEditingValue:A,onReset:b}){const k=t.useMemo(()=>`₱${v.toLocaleString()}`,[v]);return e.jsxs("tr",{className:j?"has-override":"",style:{height:T},children:[o&&e.jsx("td",{className:"col-checkbox",children:e.jsx("input",{type:"checkbox",checked:S,onChange:()=>C(N),className:"combo-checkbox"})}),e.jsx("td",{className:"col-combo",children:e.jsx("span",{className:"combo-number",children:N})}),e.jsx("td",{className:"col-limit",children:r?e.jsx("input",{type:"number",className:"limit-input",value:M,onChange:p=>A(p.target.value),onKeyDown:p=>{p.key==="Enter"&&d(),p.key==="Escape"&&f()},autoFocus:!0}):e.jsx("span",{className:"limit-amount",children:k})}),e.jsx("td",{className:"col-status",children:j?e.jsx("span",{className:"status-badge override",children:"Custom"}):e.jsx("span",{className:"status-badge default",children:"Default"})}),e.jsx("td",{className:"col-actions",children:r?e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"action-btn save",onClick:d,title:"Save",children:"✓"}),e.jsx("button",{className:"action-btn cancel",onClick:f,title:"Cancel",children:"✕"})]}):e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"action-btn edit",onClick:()=>n(N),title:"Edit Limit",children:"✏️"}),j&&e.jsx("button",{className:"action-btn reset",onClick:()=>b(N),title:"Reset to Default",children:"🔄"})]})})]})});export{je as default};
