import{a as w,r as p,j as e}from"./index-3JpSRDbt.js";const E=()=>{const t=w(),[i,r]=p.useState(!0),[n,l]=p.useState(!1),[a,x]=p.useState(null),[g,c]=p.useState(null),[j,b]=p.useState("revenue");p.useEffect(()=>{m();const s=setInterval(()=>{m(!0)},3e4);return()=>clearInterval(s)},[]);const m=async(s=!1)=>{try{s||r(!0),l(s),await new Promise(f=>setTimeout(f,800));const h=P();x(h),c(null)}catch(h){c("Failed to load dashboard data"),console.error("Dashboard load error:",h)}finally{r(!1),l(!1)}},y=()=>{m()},N=()=>{console.log("Exporting dashboard data...")},o=s=>{switch(console.log("Quick action:",s),s){case"launch_draw":t("/game-administrator/draw-management");break;case"broadcast":k("Opening broadcast form...","info");break;case"manage_tellers":t("/game-administrator/user-management");break;case"configuration":t("/game-administrator/configuration");break;case"compliance_report":N();break;case"void_queue":t("/game-administrator/daily-operations");break;case"health_check":k("Running system diagnostics...","info");break;case"emergency_stop":window.confirm("âš ï¸ EMERGENCY STOP: This will pause all operations. Are you sure?")&&k("Emergency stop initiated","warning");break}},v=s=>{s&&t(s)},k=(s,h="info")=>{console.log(`[${h.toUpperCase()}] ${s}`)};return i?e.jsx(D,{}):g?e.jsx(S,{error:g,onRetry:y,navigate:t}):a?e.jsxs("div",{className:"dashboard-page",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"dashboard-header-content",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"dashboard-title",children:"Game Administrator Dashboard"}),e.jsx("p",{className:"dashboard-subtitle",children:"Real-time system monitoring and operational control center"})]}),e.jsxs("div",{className:"dashboard-header-actions",children:[e.jsxs("button",{className:"dashboard-action-btn",onClick:y,disabled:n,"aria-label":"Refresh dashboard",children:[e.jsx("span",{className:`icon ${n?"spinning":""}`,children:"ðŸ”„"}),e.jsx("span",{children:n?"Refreshing...":"Refresh"})]}),e.jsxs("button",{className:"dashboard-action-btn",onClick:N,"aria-label":"Export dashboard data",children:[e.jsx("span",{className:"icon",children:"ðŸ“Š"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"dashboard-status-bar",children:e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Last Updated:"}),e.jsx("span",{className:"status-value",children:R(new Date)}),n&&e.jsx("span",{className:"refresh-indicator",children:"â—"})]})})]}),e.jsxs("section",{className:"kpi-section",role:"region","aria-labelledby":"kpi-heading",children:[e.jsx("h2",{id:"kpi-heading",className:"section-title",children:"System Overview"}),e.jsxs("div",{className:"kpi-grid",children:[e.jsx(u,{label:"Active Games",value:a.kpis.activeGames.value,trend:a.kpis.activeGames.trend,icon:"ðŸŽ®",status:"success",tooltip:`${a.kpis.activeGames.breakdown.map(s=>`${s.type}: ${s.count}`).join(", ")}`}),e.jsx(u,{label:"Teller Attendance",value:`${a.kpis.tellerAttendance.percentage}%`,subtitle:`${a.kpis.tellerAttendance.active}/${a.kpis.tellerAttendance.total} active`,trend:a.kpis.tellerAttendance.trend,icon:"ðŸ‘¥",status:a.kpis.tellerAttendance.percentage>=85?"success":"warning",onClick:()=>v("/game-administrator/daily-operations")}),e.jsx(u,{label:"Draws Completed",value:`${a.kpis.drawsCompleted.percentage}%`,subtitle:`${a.kpis.drawsCompleted.completed}/${a.kpis.drawsCompleted.scheduled} draws`,trend:{direction:"neutral",percentage:0},icon:"ðŸŽ²",status:a.kpis.drawsCompleted.percentage>=90?"success":"warning",onClick:()=>v("/game-administrator/draw-management")}),e.jsx(u,{label:"Revenue vs Target",value:`â‚±${(a.kpis.revenue.actual/1e6).toFixed(2)}M`,subtitle:`${a.kpis.revenue.percentage}% of â‚±${(a.kpis.revenue.target/1e6).toFixed(1)}M`,trend:a.kpis.revenue.trend,icon:"ðŸ’°",status:a.kpis.revenue.percentage>=90?"success":"warning",onClick:()=>v("/game-administrator/reports")}),e.jsx(u,{label:"Void Requests",value:a.kpis.voidRequests.pending,subtitle:`${a.kpis.voidRequests.total} total today`,trend:{direction:"neutral",percentage:0},icon:"âš ï¸",status:a.kpis.voidRequests.pending>10?"critical":"success",badge:a.kpis.voidRequests.pending,onClick:()=>v("/game-administrator/daily-operations")}),e.jsx(u,{label:"System Uptime",value:`${a.kpis.systemUptime.percentage}%`,subtitle:"last 24 hours",trend:{direction:"neutral",percentage:0},icon:"ðŸŸ¢",status:a.kpis.systemUptime.percentage>=99?"success":"warning",tooltip:`Last incident: ${T(a.kpis.systemUptime.lastIncident)}`})]})]}),e.jsxs("section",{className:"analytics-section",role:"region","aria-labelledby":"analytics-heading",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{id:"analytics-heading",className:"section-title",children:"Performance Snapshot"}),e.jsxs("div",{className:"analytics-header-actions",children:[e.jsxs("select",{value:j,onChange:s=>b(s.target.value),className:"filter-select","aria-label":"Select metric",children:[e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"tickets",children:"Ticket Volume"}),e.jsx("option",{value:"payout",children:"Payout Ratio"})]}),e.jsx("button",{className:"btn-icon",onClick:N,"aria-label":"Export analytics",children:e.jsx("span",{children:"ðŸ“ˆ"})})]})]}),e.jsxs("div",{className:"performance-chart",children:[e.jsxs("div",{className:"top-performers",children:[e.jsxs("h3",{className:"subsection-title",children:["Top 5 Branches by ",j]}),a.analytics.branchPerformance.slice(0,5).map((s,h)=>e.jsxs("div",{className:"performer-item",onClick:()=>v("/game-administrator/reports"),children:[e.jsxs("span",{className:"rank",children:["#",h+1]}),e.jsx("span",{className:"name",children:s.branchName}),e.jsxs("span",{className:"value",children:["â‚±",(s.revenue/1e3).toFixed(1),"K"]}),e.jsxs("span",{className:`trend ${s.trend}`,children:[s.trend==="up"?"â†‘":"â†“"," ",s.changePercentage,"%"]})]},s.branchId))]}),e.jsxs("div",{className:"analytics-summary",children:[e.jsxs("div",{className:"summary-stat",children:[e.jsx("span",{className:"stat-label",children:"Total Revenue"}),e.jsxs("span",{className:"stat-value",children:["â‚±",(a.analytics.overallMetrics.totalRevenue/1e6).toFixed(2),"M"]})]}),e.jsxs("div",{className:"summary-stat",children:[e.jsx("span",{className:"stat-label",children:"Total Tickets"}),e.jsx("span",{className:"stat-value",children:a.analytics.overallMetrics.totalTickets.toLocaleString()})]}),e.jsxs("div",{className:"summary-stat",children:[e.jsx("span",{className:"stat-label",children:"Avg Ticket Value"}),e.jsxs("span",{className:"stat-value",children:["â‚±",a.analytics.overallMetrics.avgTicketValue.toFixed(2)]})]}),e.jsxs("div",{className:"summary-stat",children:[e.jsx("span",{className:"stat-label",children:"Profit Margin"}),e.jsxs("span",{className:"stat-value",children:[(a.analytics.overallMetrics.profitMargin*100).toFixed(1),"%"]})]})]})]})]}),e.jsxs("section",{className:"quick-actions-section",role:"region","aria-labelledby":"actions-heading",children:[e.jsx("h2",{id:"actions-heading",className:"section-title",children:"Quick Actions"}),e.jsxs("div",{className:"quick-actions-grid",children:[e.jsx(d,{icon:"ðŸš€",label:"Launch New Draw",shortcut:"Ctrl+N",onClick:()=>o("launch_draw")}),e.jsx(d,{icon:"ðŸ“¢",label:"Broadcast Advisory",shortcut:"Ctrl+B",onClick:()=>o("broadcast")}),e.jsx(d,{icon:"ðŸ‘¥",label:"Manage Tellers",shortcut:"Ctrl+U",onClick:()=>o("manage_tellers")}),e.jsx(d,{icon:"âš™ï¸",label:"Configuration",shortcut:"Ctrl+K",onClick:()=>o("configuration")}),e.jsx(d,{icon:"ðŸ“„",label:"Compliance Report",shortcut:"Ctrl+R",onClick:()=>o("compliance_report")}),e.jsx(d,{icon:"âš ï¸",label:"Void Queue",shortcut:"Ctrl+V",onClick:()=>o("void_queue")}),e.jsx(d,{icon:"ðŸ”",label:"System Health",onClick:()=>o("health_check")}),e.jsx(d,{icon:"ðŸ›‘",label:"Emergency Stop",variant:"danger",onClick:()=>o("emergency_stop")})]})]}),e.jsxs("section",{className:"health-section",role:"region","aria-labelledby":"health-heading",children:[e.jsx("h2",{id:"health-heading",className:"section-title",children:"System Health & Services"}),e.jsx("div",{className:"health-grid",children:a.systemHealth.services.map(s=>e.jsx(C,{name:s.name,status:s.status,latency:s.latency,uptime:s.uptime},s.name))}),a.systemHealth.scheduledMaintenance.length>0&&e.jsxs("div",{className:"maintenance-notice",children:[e.jsx("span",{className:"notice-icon",children:"ðŸ”§"}),e.jsxs("span",{children:["Scheduled maintenance: ",a.systemHealth.scheduledMaintenance[0].title," on"," ",$(a.systemHealth.scheduledMaintenance[0].scheduledStart)," ","(",a.systemHealth.scheduledMaintenance[0].duration," minutes)"]})]})]})]}):e.jsx(M,{})},u=({label:t,value:i,subtitle:r,trend:n,icon:l,status:a,badge:x,tooltip:g,onClick:c})=>{const[j,b]=p.useState(!1);return e.jsxs("div",{className:`kpi-card ${a} ${c?"clickable":""}`,onClick:c,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),role:c?"button":"article",tabIndex:c?0:void 0,onKeyPress:m=>{c&&(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),c())},children:[e.jsxs("div",{className:"kpi-header",children:[e.jsx("span",{className:"kpi-icon",children:l}),x!==void 0&&x>0&&e.jsx("span",{className:"kpi-badge",children:x})]}),e.jsxs("div",{className:"kpi-body",children:[e.jsx("div",{className:"kpi-value",children:i}),e.jsx("div",{className:"kpi-label",children:t}),r&&e.jsx("div",{className:"kpi-subtitle",children:r})]}),n&&n.direction!=="neutral"&&e.jsxs("div",{className:`kpi-trend ${n.direction}`,children:[e.jsx("span",{className:"trend-arrow",children:n.direction==="up"?"â†‘":"â†“"}),e.jsxs("span",{className:"trend-value",children:[n.percentage,"%"]}),e.jsx("span",{className:"trend-label",children:"vs yesterday"})]}),g&&j&&e.jsx("div",{className:"kpi-tooltip",children:g})]})},d=({icon:t,label:i,shortcut:r,variant:n,onClick:l})=>e.jsxs("button",{className:`quick-action-btn ${n||""}`,onClick:l,"aria-label":i,children:[e.jsx("span",{className:"action-icon",children:t}),e.jsx("span",{className:"action-label",children:i}),r&&e.jsx("span",{className:"action-shortcut",children:r})]}),C=({name:t,status:i,latency:r,uptime:n})=>e.jsxs("div",{className:`health-service ${i}`,role:"article",children:[e.jsxs("div",{className:"service-header",children:[e.jsxs("div",{className:"service-status",children:[e.jsx("span",{className:`status-dot ${i}`,"aria-label":i}),e.jsx("span",{className:"service-name",children:t})]}),e.jsx("div",{className:"service-metrics",children:e.jsxs("span",{className:"service-latency",children:[r,"ms"]})})]}),e.jsxs("div",{className:"service-uptime",children:[e.jsx("div",{className:"uptime-bar",children:e.jsx("div",{className:"uptime-fill",style:{width:`${n}%`},"aria-label":`${n}% uptime`})}),e.jsxs("span",{className:"uptime-text",children:[n,"% uptime"]})]})]}),D=()=>e.jsx("div",{className:"dashboard-page",children:e.jsxs("div",{className:"dashboard-loading",children:[e.jsxs("div",{className:"loading-header",children:[e.jsx("div",{className:"skeleton skeleton-text",style:{width:"150px",height:"24px"}}),e.jsx("div",{className:"skeleton skeleton-button"})]}),e.jsx("div",{className:"kpi-grid",children:[1,2,3,4,5,6].map(t=>e.jsx("div",{className:"kpi-skeleton skeleton"},t))}),e.jsx("div",{className:"skeleton skeleton-section",style:{height:"400px",marginBottom:"1.5rem"}})]})}),S=({error:t,onRetry:i,navigate:r})=>e.jsx("div",{className:"dashboard-error",children:e.jsxs("div",{className:"error-content",children:[e.jsx("span",{className:"error-icon",children:"âš ï¸"}),e.jsx("h2",{className:"error-title",children:"Unable to Load Dashboard"}),e.jsx("p",{className:"error-message",children:t}),e.jsxs("div",{className:"error-actions",children:[e.jsxs("button",{className:"btn-retry",onClick:i,children:[e.jsx("span",{children:"ðŸ”„"}),e.jsx("span",{children:"Retry"})]}),e.jsxs("button",{className:"btn-support",onClick:()=>r("/stl-gaming-system/support"),children:[e.jsx("span",{children:"ðŸ’¬"}),e.jsx("span",{children:"Contact Support"})]})]})]})}),M=()=>e.jsx("div",{className:"dashboard-empty",children:e.jsxs("div",{className:"empty-content",children:[e.jsx("span",{className:"empty-icon",children:"ðŸ“Š"}),e.jsx("h2",{className:"empty-title",children:"No Data Available"}),e.jsx("p",{className:"empty-message",children:"Dashboard data will appear here once system operations begin."})]})}),R=t=>new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),$=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=t=>{const i=new Date,r=new Date(t),n=i-r,l=Math.floor(n/6e4);if(l<1)return"Just now";if(l<60)return`${l} min ago`;const a=Math.floor(l/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`},P=()=>({kpis:{activeGames:{value:12,breakdown:[{type:"3D",count:5},{type:"2D",count:7}],trend:{direction:"up",percentage:8.3}},tellerAttendance:{active:142,total:156,percentage:91,trend:{direction:"down",percentage:2.1}},drawsCompleted:{completed:47,scheduled:50,percentage:94},revenue:{actual:28475635e-1,target:3e6,percentage:94.9,trend:{direction:"up",percentage:12.5}},voidRequests:{pending:8,total:23},systemUptime:{percentage:99.87,lastIncident:"2025-10-06T14:23:00Z",status:"operational"}},analytics:{timePeriod:{start:"2025-10-08T00:00:00Z",end:"2025-10-08T23:59:59Z",type:"daily"},branchPerformance:[{branchId:"branch_012",branchName:"Davao Central",revenue:145230.5,ticketVolume:5847,payoutRatio:.68,rank:1,trend:"up",changePercentage:12.5},{branchId:"branch_045",branchName:"Tagum Station",revenue:132450,ticketVolume:5234,payoutRatio:.71,rank:2,trend:"up",changePercentage:8.2},{branchId:"branch_028",branchName:"Panabo Outlet",revenue:98760.25,ticketVolume:4012,payoutRatio:.69,rank:3,trend:"down",changePercentage:5.3},{branchId:"branch_056",branchName:"Mati Branch",revenue:87340,ticketVolume:3456,payoutRatio:.7,rank:4,trend:"up",changePercentage:15.7},{branchId:"branch_034",branchName:"Digos Station",revenue:76820.5,ticketVolume:3123,payoutRatio:.73,rank:5,trend:"down",changePercentage:3.2}],overallMetrics:{totalRevenue:28475635e-1,totalTickets:114567,avgTicketValue:24.85,payoutRatio:.72,profitMargin:.28}},systemHealth:{overallStatus:"operational",lastChecked:new Date().toISOString(),services:[{name:"API Gateway",status:"operational",latency:45,uptime:99.98},{name:"Payment Gateway",status:"degraded",latency:234,uptime:99.45},{name:"Database",status:"operational",latency:12,uptime:99.99},{name:"SMS Provider",status:"operational",latency:89,uptime:99.87}],scheduledMaintenance:[{id:"maint_001",title:"Database optimization",scheduledStart:"2025-10-15T02:00:00Z",duration:120,impact:"low"}]}});export{E as default};
