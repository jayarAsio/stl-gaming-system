import{r as m,j as e}from"./index-BV8VS4u8.js";import{r as w}from"./index-CWcfSh85.js";const H=()=>{const[j,y]=m.useState(()=>{try{return JSON.parse(localStorage.getItem("UM_TELLERS_V1")||"[]").length>0?JSON.parse(localStorage.getItem("UM_TELLERS_V1")):[{id:"T-0001",name:"Ana Cruz",area:"Toril",lastActive:"Sep 10, 2025 · 14:22",assigned:"Joy Santos",contact:"+63 917 555 0123",address:"Blk 5 Lot 18, Purok 4, Toril, Davao City",username:"ana.cruz",email:"ana.cruz@example.com",device:"IOS-A12-9F3",twofa:"Enabled",suspended:!1},{id:"T-0002",name:"Mark Dela Peña",area:"Buhangin",lastActive:"Sep 09, 2025 · 09:05",assigned:"Leo Tan",contact:"+63 998 222 0045",address:"Blk 2 Lot 9, Buhangin, Davao City",username:"mark.dp",email:"mark.dp@example.com",device:"AND-S20-2C1",twofa:"Disabled",suspended:!0},{id:"T-0003",name:"Carla Reyes",area:"Lanang",lastActive:"Sep 10, 2025 · 16:40",assigned:"Joy Santos",contact:"+63 921 111 0303",address:"Purok 3, Lanang, Davao City",username:"carla.r",email:"carla.r@example.com",device:"IOS-13P-7ZZ",twofa:"Enabled",suspended:!1},{id:"T-0004",name:"Lara Torres",area:"Agdao",lastActive:"Sep 08, 2025 · 17:12",assigned:"Rhea Mercado",contact:"+63 920 333 0404",address:"Agdao, Davao City",username:"lara.t",email:"lara.t@example.com",device:"AND-A54-1P2",twofa:"Disabled",suspended:!0},{id:"T-0005",name:"Paolo Garcia",area:"Sasa",lastActive:"Sep 11, 2025 · 09:02",assigned:"Earl Andres",contact:"+63 917 555 0505",address:"Sasa, Davao City",username:"paolo.g",email:"paolo.g@example.com",device:"IOS-11P-3AA",twofa:"Enabled",suspended:!1}]}catch{return[]}}),[h,C]=m.useState(()=>{try{return JSON.parse(localStorage.getItem("UM_COLLECTORS_V1")||"[]").length>0?JSON.parse(localStorage.getItem("UM_COLLECTORS_V1")):[{id:"C-0101",name:"Joy Santos",area:"Matina Aplaya",lastSync:"Sep 10, 2025 · 20:44",contact:"+63 917 555 0456",address:"Purok 2, Matina Aplaya, Davao City",username:"joy.s",email:"joy.s@example.com",device:"IOS-11P-7XZ",twofa:"Enabled",tellers:["Ana Cruz (T-0001)","Carla Reyes (T-0003)"],suspended:!1},{id:"C-0102",name:"Leo Tan",area:"Agdao",lastSync:"Sep 07, 2025 · 11:18",contact:"+63 995 123 0088",address:"Blk 7, Agdao, Davao City",username:"leo.t",email:"leo.t@example.com",device:"AND-A54-1P2",twofa:"Disabled",tellers:["Mark Dela Peña (T-0002)"],suspended:!0},{id:"C-0103",name:"Rhea Mercado",area:"Lanang",lastSync:"Sep 11, 2025 · 06:55",contact:"+63 917 888 0303",address:"Lanang, Davao City",username:"rhea.m",email:"rhea.m@example.com",device:"IOS-12M-8QQ",twofa:"Enabled",tellers:["Lara Torres (T-0004)"],suspended:!1}]}catch{return[]}}),[v,T]=m.useState("tellers"),[b,F]=m.useState(""),[n,_]=m.useState({key:null,direction:"asc"}),[r,L]=m.useState({open:!1,data:null,type:null}),[g,S]=m.useState({open:!1,type:null}),[N,k]=m.useState({open:!1,data:null,type:null}),[a,c]=m.useState({});m.useEffect(()=>{localStorage.setItem("UM_TELLERS_V1",JSON.stringify(j))},[j]),m.useEffect(()=>{localStorage.setItem("UM_COLLECTORS_V1",JSON.stringify(h))},[h]),m.useEffect(()=>{const s=r.open||g.open||N.open;return document.body.classList.toggle("um-lock",s),document.body.classList.toggle("um-blur-bg",s),()=>{document.body.classList.remove("um-lock","um-blur-bg")}},[r.open,g.open,N.open]);const A=s=>(s||"NA").trim().split(/\s+/).map(t=>t[0]).filter(Boolean).join("").slice(0,2).toUpperCase(),E=s=>{const t=s.match(/([A-Za-z]{3})\s+(\d{1,2}),\s*(\d{4})\s*[·•]\s*(\d{1,2}):(\d{2})/);if(!t)return 0;const d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},[l,i,o,p,z,Q]=t;return new Date(Number(p),d[i],Number(o),Number(z),Number(Q)).getTime()},$=()=>{const s=new Date;return`${s.toLocaleString("en-US",{month:"short"})} ${String(s.getDate()).padStart(2,"0")}, ${s.getFullYear()} · ${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}`},f={tellersActive:j.filter(s=>!s.suspended).length,tellersSuspended:j.filter(s=>s.suspended).length,tellersTotal:j.length,collectorsActive:h.filter(s=>!s.suspended).length,collectorsSuspended:h.filter(s=>s.suspended).length,collectorsTotal:h.length},x=s=>{_(t=>({key:s,direction:t.key===s&&t.direction==="asc"?"desc":"asc"}))},J=s=>n.key?[...s].sort((t,d)=>{let l=t[n.key],i=d[n.key];return n.key==="suspended"&&(l=t.suspended?0:1,i=d.suspended?0:1),(n.key==="lastActive"||n.key==="lastSync")&&(l=E(l||""),i=E(i||"")),typeof l=="string"&&(l=l.toLowerCase(),i=(i||"").toLowerCase()),l<i?n.direction==="asc"?-1:1:l>i?n.direction==="asc"?1:-1:0}):s,V=s=>{if(!b)return s;const t=b.toLowerCase();return s.filter(d=>Object.values(d).some(l=>String(l).toLowerCase().includes(t)))},D=s=>J(V(s)),q=D(j),R=D(h),M=(s,t)=>{t==="teller"?y(d=>d.map(l=>l.id===s?{...l,suspended:!l.suspended}:l)):C(d=>d.map(l=>l.id===s?{...l,suspended:!l.suspended}:l))},U=s=>{if(s.preventDefault(),g.type==="teller"){const d=j.map(p=>parseInt(p.id.split("-")[1])).filter(Boolean),l=d.length?Math.max(...d)+1:1,o={id:`T-${String(l).padStart(4,"0")}`,name:`${a.firstName} ${a.lastName}`.trim(),area:a.area,lastActive:$(),assigned:a.assigned||"—",contact:a.contact,address:a.address,username:`${a.firstName}.${a.lastName}`.toLowerCase(),email:`${a.firstName}.${a.lastName}@example.com`.toLowerCase(),device:"—",twofa:"Enabled",suspended:!1};y(p=>[...p,o])}else{const d=h.map(p=>parseInt(p.id.split("-")[1])).filter(Boolean),l=d.length?Math.max(...d)+1:101,o={id:`C-${String(l).padStart(4,"0")}`,name:`${a.firstName} ${a.lastName}`.trim(),area:a.area,lastSync:$(),contact:a.contact,address:a.address,username:`${a.firstName}.${a.lastName}`.toLowerCase(),email:`${a.firstName}.${a.lastName}@example.com`.toLowerCase(),device:"—",twofa:"Enabled",tellers:[],suspended:!1};C(p=>[...p,o])}S({open:!1,type:null}),c({})},B=s=>{s.preventDefault();const{id:t,type:d}=N.data,l=`${a.firstName} ${a.lastName}`.trim();d==="teller"?y(i=>i.map(o=>o.id===t?{...o,name:l,area:a.area,contact:a.contact,address:a.address,assigned:a.assigned||"—",username:`${a.firstName}.${a.lastName}`.toLowerCase(),email:`${a.firstName}.${a.lastName}@example.com`.toLowerCase()}:o)):C(i=>i.map(o=>o.id===t?{...o,name:l,area:a.area,contact:a.contact,address:a.address,username:`${a.firstName}.${a.lastName}`.toLowerCase(),email:`${a.firstName}.${a.lastName}@example.com`.toLowerCase()}:o)),k({open:!1,data:null,type:null}),c({})},I=(s,t)=>{L({open:!0,data:s,type:t})},O=s=>{c({}),S({open:!0,type:s})},P=(s,t)=>{const[d,...l]=s.name.split(" ");c({firstName:d||"",lastName:l.join(" ")||"",area:s.area||"",contact:s.contact||"",address:s.address||"",assigned:s.assigned||""}),k({open:!0,data:{...s,type:t},type:t})},u=()=>{L({open:!1,data:null,type:null}),S({open:!1,type:null}),k({open:!1,data:null,type:null}),c({})};return m.useEffect(()=>{const s=t=>{t.key==="Escape"&&u()};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[]),e.jsxs("div",{className:"um-container",children:[e.jsxs("div",{className:"um-card",children:[e.jsxs("div",{className:"um-tabbar",children:[e.jsx("button",{className:`um-tab ${v==="tellers"?"active":""}`,onClick:()=>T("tellers"),children:"👥 Tellers"}),e.jsx("button",{className:`um-tab ${v==="collectors"?"active":""}`,onClick:()=>T("collectors"),children:"📋 Collectors"}),e.jsx("div",{className:"um-grow"}),v==="tellers"&&e.jsx("button",{className:"um-btn um-btn-primary",onClick:()=>O("teller"),children:"+ Create Teller"}),v==="collectors"&&e.jsx("button",{className:"um-btn um-btn-primary",onClick:()=>O("collector"),children:"+ Create Collector"})]}),e.jsxs("div",{className:"um-tools",children:[e.jsxs("div",{className:"um-search",children:[e.jsx("span",{className:"um-search-icon",children:"🔍"}),e.jsx("input",{type:"text",className:"um-input",placeholder:`Search ${v}...`,value:b,onChange:s=>F(s.target.value)})]}),e.jsx("div",{className:"um-stats",children:v==="tellers"?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"um-stat um-stat-success",children:["Active ",e.jsx("strong",{children:f.tellersActive})]}),e.jsxs("span",{className:"um-stat um-stat-danger",children:["Suspended ",e.jsx("strong",{children:f.tellersSuspended})]}),e.jsxs("span",{className:"um-stat",children:["Total ",e.jsx("strong",{children:f.tellersTotal})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"um-stat um-stat-success",children:["Active ",e.jsx("strong",{children:f.collectorsActive})]}),e.jsxs("span",{className:"um-stat um-stat-danger",children:["Suspended ",e.jsx("strong",{children:f.collectorsSuspended})]}),e.jsxs("span",{className:"um-stat",children:["Total ",e.jsx("strong",{children:f.collectorsTotal})]})]})})]}),e.jsx("div",{className:"um-table-wrap",children:v==="tellers"?e.jsxs("table",{className:"um-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>x("name"),children:["Teller ",n.key==="name"&&(n.direction==="asc"?"↑":"↓")]}),e.jsxs("th",{onClick:()=>x("area"),children:["Area ",n.key==="area"&&(n.direction==="asc"?"↑":"↓")]}),e.jsxs("th",{onClick:()=>x("suspended"),children:["Status ",n.key==="suspended"&&(n.direction==="asc"?"↑":"↓")]}),e.jsxs("th",{onClick:()=>x("lastActive"),children:["Last Active ",n.key==="lastActive"&&(n.direction==="asc"?"↑":"↓")]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:q.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"um-person",children:[e.jsx("span",{className:"um-avatar",children:A(s.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"um-name",children:s.name}),e.jsxs("div",{className:"um-sub",children:["ID: ",s.id]})]})]})}),e.jsx("td",{children:s.area}),e.jsx("td",{children:e.jsx("span",{className:`um-pill ${s.suspended?"um-pill-danger":"um-pill-success"}`,children:s.suspended?"Suspended":"Active"})}),e.jsx("td",{children:s.lastActive}),e.jsxs("td",{className:"um-actions",children:[e.jsx("button",{className:"um-btn-ghost",onClick:()=>I(s,"teller"),children:"View"}),e.jsx("button",{className:"um-btn-ghost",onClick:()=>P(s,"teller"),children:"Edit"}),e.jsx("button",{className:"um-btn-ghost",onClick:()=>M(s.id,"teller"),children:s.suspended?"Activate":"Suspend"})]})]},s.id))})]}):e.jsxs("table",{className:"um-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>x("name"),children:["Collector ",n.key==="name"&&(n.direction==="asc"?"↑":"↓")]}),e.jsxs("th",{onClick:()=>x("area"),children:["Area ",n.key==="area"&&(n.direction==="asc"?"↑":"↓")]}),e.jsxs("th",{onClick:()=>x("suspended"),children:["Status ",n.key==="suspended"&&(n.direction==="asc"?"↑":"↓")]}),e.jsxs("th",{onClick:()=>x("lastSync"),children:["Last Sync ",n.key==="lastSync"&&(n.direction==="asc"?"↑":"↓")]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:R.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"um-person",children:[e.jsx("span",{className:"um-avatar",children:A(s.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"um-name",children:s.name}),e.jsxs("div",{className:"um-sub",children:["ID: ",s.id]})]})]})}),e.jsx("td",{children:s.area}),e.jsx("td",{children:e.jsx("span",{className:`um-pill ${s.suspended?"um-pill-danger":"um-pill-success"}`,children:s.suspended?"Suspended":"Active"})}),e.jsx("td",{children:s.lastSync}),e.jsxs("td",{className:"um-actions",children:[e.jsx("button",{className:"um-btn-ghost",onClick:()=>I(s,"collector"),children:"View"}),e.jsx("button",{className:"um-btn-ghost",onClick:()=>P(s,"collector"),children:"Edit"}),e.jsx("button",{className:"um-btn-ghost",onClick:()=>M(s.id,"collector"),children:s.suspended?"Activate":"Suspend"})]})]},s.id))})]})})]}),r.open&&r.data&&w.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"um-modal-overlay active",onClick:u}),e.jsx("div",{className:"um-modal-container active",children:e.jsxs("div",{className:"um-modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"um-modal-header",children:[e.jsxs("h3",{children:[r.type==="teller"?"Teller":"Collector"," Details"]}),e.jsx("button",{className:"um-modal-close",onClick:u,children:"×"})]}),e.jsxs("div",{className:"um-modal-body",children:[e.jsxs("div",{className:"um-profile",children:[e.jsx("span",{className:"um-avatar-lg",children:A(r.data.name)}),e.jsxs("div",{children:[e.jsx("h4",{children:r.data.name}),e.jsxs("p",{children:[r.data.id," · ",r.data.area]})]}),e.jsx("span",{className:`um-pill ${r.data.suspended?"um-pill-danger":"um-pill-success"}`,children:r.data.suspended?"Suspended":"Active"})]}),e.jsxs("div",{className:"um-details",children:[e.jsxs("div",{className:"um-detail-grid",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Contact"}),e.jsx("p",{children:r.data.contact})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Address"}),e.jsx("p",{children:r.data.address})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Username"}),e.jsx("p",{children:r.data.username})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Email"}),e.jsx("p",{children:r.data.email})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Device"}),e.jsx("p",{children:r.data.device})]}),e.jsxs("div",{children:[e.jsx("label",{children:"2FA"}),e.jsx("p",{children:r.data.twofa})]}),r.type==="teller"&&e.jsxs("div",{children:[e.jsx("label",{children:"Assigned To"}),e.jsx("p",{children:r.data.assigned||"—"})]})]}),r.type==="collector"&&r.data.tellers&&e.jsxs("div",{className:"um-tellers-list",children:[e.jsx("label",{children:"Assigned Tellers"}),e.jsx("ul",{children:r.data.tellers.length?r.data.tellers.map((s,t)=>e.jsx("li",{children:s},t)):e.jsx("li",{children:"—"})})]})]})]}),e.jsx("div",{className:"um-modal-footer",children:e.jsx("button",{className:"um-btn-secondary",onClick:u,children:"Close"})})]})})]}),document.body),g.open&&w.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"um-modal-overlay active",onClick:u}),e.jsx("div",{className:"um-modal-container active",children:e.jsxs("form",{className:"um-modal-content",onSubmit:U,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"um-modal-header",children:[e.jsxs("h3",{children:["Create ",g.type==="teller"?"Teller":"Collector"]}),e.jsx("button",{type:"button",className:"um-modal-close",onClick:u,children:"×"})]}),e.jsxs("div",{className:"um-modal-body",children:[e.jsxs("div",{className:"um-form-row",children:[e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"First Name"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.firstName||"",onChange:s=>c({...a,firstName:s.target.value})})]}),e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Last Name"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.lastName||"",onChange:s=>c({...a,lastName:s.target.value})})]})]}),e.jsxs("div",{className:"um-form-row",children:[e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Area"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.area||"",onChange:s=>c({...a,area:s.target.value})})]}),e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Contact"}),e.jsx("input",{type:"text",className:"um-control",required:!0,placeholder:"+63 ...",value:a.contact||"",onChange:s=>c({...a,contact:s.target.value})})]})]}),e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Address"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.address||"",onChange:s=>c({...a,address:s.target.value})})]}),g.type==="teller"&&e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Assigned Collector"}),e.jsxs("select",{className:"um-control",value:a.assigned||"",onChange:s=>c({...a,assigned:s.target.value}),children:[e.jsx("option",{value:"",children:"No collector assigned"}),h.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"um-modal-footer",children:[e.jsx("button",{type:"button",className:"um-btn-secondary",onClick:u,children:"Cancel"}),e.jsx("button",{type:"submit",className:"um-btn-primary",children:"Create"})]})]})})]}),document.body),N.open&&N.data&&w.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"um-modal-overlay active",onClick:u}),e.jsx("div",{className:"um-modal-container active",children:e.jsxs("form",{className:"um-modal-content",onSubmit:B,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"um-modal-header",children:[e.jsxs("h3",{children:["Edit ",N.type==="teller"?"Teller":"Collector"]}),e.jsx("button",{type:"button",className:"um-modal-close",onClick:u,children:"×"})]}),e.jsxs("div",{className:"um-modal-body",children:[e.jsxs("div",{className:"um-form-row",children:[e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"First Name"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.firstName||"",onChange:s=>c({...a,firstName:s.target.value})})]}),e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Last Name"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.lastName||"",onChange:s=>c({...a,lastName:s.target.value})})]})]}),e.jsxs("div",{className:"um-form-row",children:[e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Area"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.area||"",onChange:s=>c({...a,area:s.target.value})})]}),e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Contact"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.contact||"",onChange:s=>c({...a,contact:s.target.value})})]})]}),e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Address"}),e.jsx("input",{type:"text",className:"um-control",required:!0,value:a.address||"",onChange:s=>c({...a,address:s.target.value})})]}),N.type==="teller"&&e.jsxs("div",{className:"um-form-field",children:[e.jsx("label",{children:"Assigned Collector"}),e.jsxs("select",{className:"um-control",value:a.assigned||"",onChange:s=>c({...a,assigned:s.target.value}),children:[e.jsx("option",{value:"",children:"No collector assigned"}),h.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"um-modal-footer",children:[e.jsx("button",{type:"button",className:"um-btn-secondary",onClick:u,children:"Cancel"}),e.jsx("button",{type:"submit",className:"um-btn-primary",children:"Save Changes"})]})]})})]}),document.body)]})};export{H as default};
