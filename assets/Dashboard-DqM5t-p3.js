import{r as a,u as D,b as P,a as $,j as e,L as N,O as Y}from"./index-DANIss5C.js";const A=[{key:"dashboard",label:"Dashboard",icon:"ðŸ“Š",path:"/operation-support"},{key:"balances",label:"Balances",icon:"ðŸ’°",path:"/operation-support/balances"},{key:"daily-ledgers",label:"Daily Ledgers",icon:"ðŸ“‹",path:"/operation-support/daily-ledgers"},{key:"reports",label:"Reports",icon:"ðŸ“ˆ",path:"/operation-support/reports"}],M=()=>{const[n,l]=a.useState(!1),[o,r]=a.useState(!1),[S,h]=a.useState(!0),[b,w]=a.useState(0),[d,v]=a.useState(!1),c=D(),x=P(),u=a.useRef(null),k=a.useRef(null),{user:i,logout:L,isAuthenticated:j,loading:p}=$(),m=i?{initials:i.fullName?.split(" ").map(s=>s[0]).join("")||"OS",name:i.fullName||"Operations Staff",role:i.role==="operation-support"?"Operation Support Staff":i.role,email:i.email}:{initials:"OS",name:"Operations Staff",role:"Operation Support Staff"};a.useEffect(()=>{!p&&!j&&x("/",{replace:!0})},[j,p,x]);const O=async()=>{if(!d)try{v(!0),r(!1),await L()}catch(s){console.error("Logout error:",s),v(!1)}};a.useEffect(()=>{const s=()=>{const t=window.scrollY;t>b&&t>50?h(!1):h(!0),w(t)};return window.addEventListener("scroll",s,{passive:!0}),()=>window.removeEventListener("scroll",s)},[b]),a.useEffect(()=>{l(!1),r(!1),window.scrollTo(0,0)},[c.pathname]),a.useEffect(()=>(n&&window.innerWidth<=768?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[n]),a.useEffect(()=>{const s=t=>{t.key==="Escape"&&(o?r(!1):n&&l(!1))};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[n,o]),a.useEffect(()=>{const s=t=>{u.current&&!u.current.contains(t.target)&&r(!1)};return o&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[o]);const f=s=>s==="/operation-support"?c.pathname===s:c.pathname.startsWith(s),E=()=>{l(s=>!s)},C=()=>{l(!1)},y=()=>{l(!1),r(!1)},g=()=>{r(s=>!s)},R=()=>{const s=c.pathname;return s==="/operation-support"?"Dashboard":s.includes("balances")?"Balances":s.includes("daily-ledgers")?"Daily Ledgers":s.includes("reports")?"Reports":"Operation Support"};return p?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",fontSize:"1.25rem",color:"#6b7280"},children:"Loading..."}):e.jsxs("div",{className:`os-layout ${n?"sidebar-open":""}`,children:[!n&&e.jsx("header",{className:`os-header ${S?"os-header-visible":"os-header-hidden"}`,children:e.jsxs("div",{className:"os-header-container",children:[e.jsxs("button",{className:"os-header-menu-btn",onClick:E,"aria-label":"Toggle menu",children:[e.jsx("span",{className:"os-hamburger-line"}),e.jsx("span",{className:"os-hamburger-line"}),e.jsx("span",{className:"os-hamburger-line"})]}),e.jsxs("div",{className:"os-header-content",children:[e.jsx("h1",{className:"os-header-title",children:R()}),e.jsx("p",{className:"os-header-subtitle",children:"Operation Support"})]})]})}),n&&e.jsx("div",{className:"os-scrim",onClick:C,"aria-hidden":"true"}),e.jsxs("aside",{ref:k,className:`os-sidebar ${n?"is-open":""}`,id:"osSidebar","aria-hidden":!n&&window.innerWidth<=768,children:[e.jsx("div",{className:"os-sidebar-header",children:e.jsxs(N,{to:"/operation-support",className:"os-brand",onClick:y,children:[e.jsx("div",{className:"os-brand-glow"}),e.jsx("span",{className:"os-brand-text",children:"Operation Support"})]})}),e.jsx("nav",{className:"os-nav","aria-label":"Primary navigation",children:e.jsx("ul",{className:"os-nav-menu",children:A.map(s=>e.jsx("li",{className:"os-nav-item",children:e.jsxs(N,{to:s.path,className:`os-nav-link ${f(s.path)?"active":""}`,"aria-current":f(s.path)?"page":void 0,onClick:y,children:[e.jsx("span",{className:"os-nav-icon",children:s.icon}),e.jsx("span",{className:"os-nav-label",children:s.label}),f(s.path)&&e.jsx("span",{className:"os-nav-indicator"})]})},s.key))})}),e.jsx("div",{className:"os-sidebar-footer",children:e.jsxs("div",{ref:u,className:`os-sidebar-profile ${o?"menu-open":""}`,onClick:g,role:"button",tabIndex:0,"aria-expanded":o,"aria-label":"User profile menu",onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),g())},children:[e.jsxs("div",{className:"os-profile-main",children:[e.jsxs("div",{className:"os-profile-avatar",children:[e.jsx("span",{children:m.initials}),e.jsx("div",{className:"os-avatar-ring"})]}),e.jsxs("div",{className:"os-profile-info",children:[e.jsx("div",{className:"os-profile-name",children:m.name}),e.jsx("div",{className:"os-profile-role",children:m.role})]}),e.jsx("span",{className:"os-profile-chevron",children:o?"â–²":"â–¼"})]}),o&&e.jsx("div",{className:"os-profile-menu",children:e.jsxs("button",{onClick:O,className:"os-profile-menu-item logout",disabled:d,type:"button",children:[e.jsx("span",{children:"ðŸšª"}),e.jsx("span",{children:d?"Logging out...":"Logout"})]})})]})})]}),e.jsx("main",{className:"os-main",children:e.jsx(Y,{})})]})};export{M as default};
