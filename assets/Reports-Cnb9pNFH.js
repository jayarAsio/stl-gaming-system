import{r as d,j as e,L as $}from"./index-DIpsmQdA.js";const L=(o,S)=>{const l=[],y=[{id:"T001",name:"Juan Dela Cruz",code:"TLR001",location:"Booth A1"},{id:"T002",name:"Maria Santos",code:"TLR002",location:"Booth B2"},{id:"T003",name:"Pedro Garcia",code:"TLR003",location:"Booth C3"},{id:"T004",name:"Ana Reyes",code:"TLR004",location:"Booth D4"},{id:"T005",name:"Carlos Lopez",code:"TLR005",location:"Booth E5"}],r=new Date(o||new Date),T=new Date(S||new Date);for(let u=new Date(r);u<=T;u.setDate(u.getDate()+1))y.forEach(h=>{if(Math.random()>.3){const x=Math.floor(Math.random()*3e4)+1e4,N=Math.floor(x*(Math.random()*.4+.3)),j=x-N,g=j*.05,c=j-g;l.push({date:u.toISOString().split("T")[0],tellerId:h.id,tellerName:h.name,tellerCode:h.code,location:h.location,totalSales:x,totalWinners:N,grossSurplus:j,commission:g,netCollected:c,collectedAt:`${u.toISOString().split("T")[0]} ${Math.floor(Math.random()*12)+8}:${Math.floor(Math.random()*60).toString().padStart(2,"0")} ${Math.random()>.5?"AM":"PM"}`,collectedBy:"Collector C001"})}});return l},A=(o,S)=>{const l=[],y=[{id:"T001",name:"Juan Dela Cruz",code:"TLR001",location:"Booth A1"},{id:"T006",name:"Rosa Martinez",code:"TLR006",location:"Booth F6"},{id:"T007",name:"Miguel Fernandez",code:"TLR007",location:"Booth G7"}],r=["insufficient_funds","multiple_winners","jackpot_prize","emergency_payout"],T=new Date(o||new Date),u=new Date(S||new Date);for(let h=new Date(T);h<=u;h.setDate(h.getDate()+1))y.forEach(x=>{if(Math.random()>.6){const N=Math.floor(Math.random()*2e4)+5e3,j=Math.floor(N*(Math.random()*.5+1.2)),g=j-N,c=g;l.push({date:h.toISOString().split("T")[0],tellerId:x.id,tellerName:x.name,tellerCode:x.code,location:x.location,totalSales:N,totalWinners:j,shortage:g,payoutAmount:c,processedAt:`${h.toISOString().split("T")[0]} ${Math.floor(Math.random()*12)+8}:${Math.floor(Math.random()*60).toString().padStart(2,"0")} ${Math.random()>.5?"AM":"PM"}`,processedBy:"Collector C001",reason:r[Math.floor(Math.random()*r.length)]})}});return l},k=()=>{const[o,S]=d.useState("combined"),[l,y]=d.useState(""),[r,T]=d.useState(""),[u,h]=d.useState(!1),[x,N]=d.useState(!1),[j,g]=d.useState({show:!1,message:"",type:"success"});d.useEffect(()=>{const s=new Date().toISOString().split("T")[0];y(s),T(s)},[]),d.useEffect(()=>(document.body.classList.add("reports-module-bg"),()=>document.body.classList.remove("reports-module-bg")),[]);const c=d.useMemo(()=>{if(!l||!r)return{collections:[],payouts:[]};const s=L(l,r),n=A(l,r);return{collections:s,payouts:n}},[l,r]),i=d.useMemo(()=>{const{collections:s,payouts:n}=c,m=s.reduce((v,C)=>v+C.netCollected,0),f=n.reduce((v,C)=>v+C.payoutAmount,0),b=s.reduce((v,C)=>v+C.grossSurplus,0),a=s.reduce((v,C)=>v+C.commission,0),M=m-f;return{totalCollections:m,totalPayouts:f,totalGrossSurplus:b,totalCommissions:a,netPosition:M,collectionsCount:s.length,payoutsCount:n.length}},[c]),p=d.useCallback((s,n="success")=>{g({show:!0,message:s,type:n}),setTimeout(()=>g(m=>({...m,show:!1})),3e3)},[]),t=s=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),_=d.useCallback(()=>{if(!l||!r){p("Please select date range","error");return}h(!0),setTimeout(()=>{h(!1),N(!0),p("Report generated successfully")},1e3)},[l,r,p]),w=d.useCallback(()=>{window.print(),p("Opening print dialog")},[p]),P=d.useCallback(()=>{window.print(),p('Use Print dialog and select "Save as PDF"')},[p]),D=d.useCallback(()=>{const{collections:s,payouts:n}=c;let m="";(o==="combined"||o==="collections")&&(m+=`COLLECTIONS REPORT
`,m+=`Date,Teller Code,Teller Name,Location,Total Sales,Total Winners,Gross Surplus,Commission,Net Collected,Collected At
`,s.forEach(a=>{m+=`${a.date},${a.tellerCode},${a.tellerName},${a.location},${a.totalSales},${a.totalWinners},${a.grossSurplus},${a.commission},${a.netCollected},${a.collectedAt}
`}),m+=`
`),(o==="combined"||o==="payouts")&&(m+=`PAYOUTS REPORT
`,m+=`Date,Teller Code,Teller Name,Location,Total Sales,Total Winners,Shortage,Payout Amount,Reason,Processed At
`,n.forEach(a=>{m+=`${a.date},${a.tellerCode},${a.tellerName},${a.location},${a.totalSales},${a.totalWinners},${a.shortage},${a.payoutAmount},${a.reason},${a.processedAt}
`}));const f=new Blob([m],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a");b.href=URL.createObjectURL(f),b.download=`collector_report_${l}_to_${r}.csv`,b.click(),p("CSV downloaded successfully")},[c,o,l,r,p]),R=()=>e.jsxs("div",{className:"statistics-grid",children:[e.jsxs("div",{className:"stat-card collections",children:[e.jsx("div",{className:"stat-value",children:t(i.totalCollections)}),e.jsx("div",{className:"stat-label",children:"Total Collections"})]}),e.jsxs("div",{className:"stat-card payouts",children:[e.jsx("div",{className:"stat-value",children:t(i.totalPayouts)}),e.jsx("div",{className:"stat-label",children:"Total Payouts"})]}),e.jsxs("div",{className:"stat-card net",children:[e.jsx("div",{className:"stat-value",children:t(i.netPosition)}),e.jsx("div",{className:"stat-label",children:"Net Position"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:i.collectionsCount+i.payoutsCount}),e.jsx("div",{className:"stat-label",children:"Total Transactions"})]})]});return e.jsxs("div",{className:"container",children:[j.show&&e.jsx("div",{className:`toast show ${j.type}`,children:j.message}),e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Reports & Analytics"}),e.jsx("p",{className:"header-subtitle",children:"Generate remittance and combined payouts/tapal reports"})]}),e.jsxs($,{to:"/collector",className:"back-btn","aria-label":"Back to Dashboard",children:[e.jsx("span",{"aria-hidden":"true",children:"‚Üê"})," Back To Dashboard"]})]}),e.jsxs("section",{className:"card statistics-section",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:"üìä"}),"Report Summary"]}),e.jsx(R,{})]}),e.jsxs("section",{className:"card configuration-section",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:"‚öôÔ∏è"}),"Report Configuration"]}),e.jsxs("div",{className:"config-grid",children:[e.jsxs("div",{className:"config-group",children:[e.jsx("label",{htmlFor:"report-type",className:"config-label",children:"Report Type"}),e.jsxs("select",{id:"report-type",className:"config-select",value:o,onChange:s=>S(s.target.value),children:[e.jsx("option",{value:"combined",children:"Combined Report"}),e.jsx("option",{value:"collections",children:"Collections Only"}),e.jsx("option",{value:"payouts",children:"Payouts Only"})]})]}),e.jsxs("div",{className:"config-group",children:[e.jsx("label",{htmlFor:"date-from",className:"config-label",children:"Date From"}),e.jsx("input",{id:"date-from",type:"date",className:"config-input",value:l,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{className:"config-group",children:[e.jsx("label",{htmlFor:"date-to",className:"config-label",children:"Date To"}),e.jsx("input",{id:"date-to",type:"date",className:"config-input",value:r,onChange:s=>T(s.target.value)})]})]}),e.jsx("div",{className:"generate-section",children:e.jsx("button",{className:"generate-btn",onClick:_,disabled:u||!l||!r,children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üìÑ"}),"Generate Report"]})})})]}),x&&e.jsxs("section",{className:"card preview-section",children:[e.jsxs("div",{className:"preview-header",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:"üìÑ"}),"Report Preview"]}),e.jsxs("div",{className:"preview-actions",children:[e.jsxs("button",{onClick:w,className:"btn btn-secondary",children:[e.jsx("span",{children:"üñ®Ô∏è"})," Print"]}),e.jsxs("button",{onClick:P,className:"btn btn-primary",children:[e.jsx("span",{children:"üì•"})," Download PDF"]}),e.jsxs("button",{onClick:D,className:"btn btn-success",children:[e.jsx("span",{children:"üìä"})," Download CSV"]})]})]}),e.jsx("div",{className:"preview-container",children:e.jsxs("div",{className:"report-preview",children:[e.jsxs("div",{className:"report-header",children:[e.jsxs("div",{className:"company-header",children:[e.jsx("h1",{children:"STL Gaming System"}),e.jsx("p",{children:"Collector Financial Report"}),e.jsx("p",{children:"Philippine Charity Sweepstakes Office"})]}),e.jsxs("div",{className:"report-meta",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Report Type:"})," ",o==="combined"?"Combined Report":o==="collections"?"Collections Only":"Payouts Only"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Period:"})," ",l," to ",r]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Generated:"})," ",new Date().toLocaleString("en-PH")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Generated By:"})," Collector C001"]})]})]}),e.jsxs("div",{className:"report-summary",children:[e.jsx("h2",{children:"Executive Summary"}),e.jsxs("div",{className:"summary-grid",children:[(o==="combined"||o==="collections")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Total Collections:"}),e.jsx("span",{className:"amount positive",children:t(i.totalCollections)})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Gross Surplus:"}),e.jsx("span",{className:"amount",children:t(i.totalGrossSurplus)})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Total Commissions:"}),e.jsx("span",{className:"amount",children:t(i.totalCommissions)})]})]}),(o==="combined"||o==="payouts")&&e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{children:"Total Payouts/Tapal:"}),e.jsx("span",{className:"amount negative",children:t(i.totalPayouts)})]}),o==="combined"&&e.jsxs("div",{className:"summary-item total",children:[e.jsx("span",{children:"Net Position:"}),e.jsx("span",{className:`amount ${i.netPosition>=0?"positive":"negative"}`,children:t(i.netPosition)})]})]})]}),(o==="combined"||o==="collections")&&c.collections.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h2",{children:"Collections Report"}),e.jsx("div",{className:"data-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Teller Code"}),e.jsx("th",{children:"Teller Name"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Total Sales"}),e.jsx("th",{children:"Winners"}),e.jsx("th",{children:"Surplus"}),e.jsx("th",{children:"Commission"}),e.jsx("th",{children:"Net Collected"})]})}),e.jsxs("tbody",{children:[c.collections.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.date}),e.jsx("td",{children:s.tellerCode}),e.jsx("td",{children:s.tellerName}),e.jsx("td",{children:s.location}),e.jsx("td",{className:"amount",children:t(s.totalSales)}),e.jsx("td",{className:"amount",children:t(s.totalWinners)}),e.jsx("td",{className:"amount",children:t(s.grossSurplus)}),e.jsx("td",{className:"amount",children:t(s.commission)}),e.jsx("td",{className:"amount",children:t(s.netCollected)})]},n)),e.jsxs("tr",{className:"total-row",children:[e.jsx("td",{colSpan:"4",children:e.jsx("strong",{children:"TOTAL COLLECTIONS"})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(c.collections.reduce((s,n)=>s+n.totalSales,0))})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(c.collections.reduce((s,n)=>s+n.totalWinners,0))})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(i.totalGrossSurplus)})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(i.totalCommissions)})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(i.totalCollections)})})]})]})]})})]}),(o==="combined"||o==="payouts")&&c.payouts.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h2",{children:"Payouts & Tapal Report"}),e.jsx("div",{className:"data-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Teller Code"}),e.jsx("th",{children:"Teller Name"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Total Sales"}),e.jsx("th",{children:"Winners"}),e.jsx("th",{children:"Shortage"}),e.jsx("th",{children:"Payout"}),e.jsx("th",{children:"Reason"})]})}),e.jsxs("tbody",{children:[c.payouts.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.date}),e.jsx("td",{children:s.tellerCode}),e.jsx("td",{children:s.tellerName}),e.jsx("td",{children:s.location}),e.jsx("td",{className:"amount",children:t(s.totalSales)}),e.jsx("td",{className:"amount",children:t(s.totalWinners)}),e.jsx("td",{className:"amount",children:t(s.shortage)}),e.jsx("td",{className:"amount",children:t(s.payoutAmount)}),e.jsx("td",{children:s.reason.replace(/_/g," ").toUpperCase()})]},n)),e.jsxs("tr",{className:"total-row",children:[e.jsx("td",{colSpan:"4",children:e.jsx("strong",{children:"TOTAL PAYOUTS"})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(c.payouts.reduce((s,n)=>s+n.totalSales,0))})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(c.payouts.reduce((s,n)=>s+n.totalWinners,0))})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(c.payouts.reduce((s,n)=>s+n.shortage,0))})}),e.jsx("td",{className:"amount",children:e.jsx("strong",{children:t(i.totalPayouts)})}),e.jsx("td",{})]})]})]})})]}),e.jsxs("div",{className:"report-footer",children:[e.jsx("p",{children:"Report Certification:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"All amounts have been verified and reconciled"}),e.jsx("li",{children:"Commission rate of 5% has been applied to all collections"}),e.jsx("li",{children:"All payouts/tapal have been properly documented with reasons"}),e.jsx("li",{children:"This report is generated automatically by the STL Gaming System"})]}),e.jsxs("div",{className:"signature-section",children:[e.jsxs("div",{className:"signature",children:[e.jsx("p",{children:"_________________________"}),e.jsx("p",{children:"Collector Signature"}),e.jsx("p",{children:"Collector C001"})]}),e.jsxs("div",{className:"signature",children:[e.jsx("p",{children:"_________________________"}),e.jsx("p",{children:"Supervisor Approval"}),e.jsxs("p",{children:["Date: ",new Date().toLocaleDateString("en-PH")]})]})]})]})]})})]})]})};export{k as default};
