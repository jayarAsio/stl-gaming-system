import{r,j as t,L as w}from"./index-Bk108cjS.js";const m=e=>`â‚±${Number(e||0).toLocaleString("en-PH",{maximumFractionDigits:0})}`,h=e=>Number(e||0).toLocaleString(),N=(e="")=>{const s=String(e).trim().split(/\s+/),l=s[0]?.[0]||"",a=s.length>1?s[s.length-1][0]:"";return(l+a).toUpperCase()||"XX"},p=e=>e.toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit",hour12:!0}),D=e=>{if(e<=0)return"00:00:00";const s=Math.floor(e/(1e3*60*60)),l=Math.floor(e%(1e3*60*60)/(1e3*60)),a=Math.floor(e%(1e3*60)/1e3);return`${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},T=e=>e.toLocaleDateString("en-PH",{month:"short",day:"numeric",year:"numeric"}),f=e=>e.toLocaleTimeString("en-PH",{hour:"numeric",minute:"2-digit",hour12:!0}),b={name:"Maria Cruz",code:"C001",status:"ON DUTY"},y={collections:45250,payouts_tapal:16250,tellers:12,processed_payouts:8},S=()=>{const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate());return[{title:"Swertres",variant:"variant-a",draws:[{time:new Date(s.getTime()+840*60*1e3),result:e>=new Date(s.getTime()+840*60*1e3)?"1-2-3":null,status:e>=new Date(s.getTime()+840*60*1e3)?"completed":"upcoming"},{time:new Date(s.getTime()+1020*60*1e3),result:e>=new Date(s.getTime()+1020*60*1e3)?"4-5-6":null,status:e>=new Date(s.getTime()+1020*60*1e3)?"completed":"upcoming"},{time:new Date(s.getTime()+1260*60*1e3),result:e>=new Date(s.getTime()+1260*60*1e3)?"7-8-9":null,status:e>=new Date(s.getTime()+1260*60*1e3)?"completed":"upcoming"}]},{title:"Last 2",variant:"variant-b",draws:[{time:new Date(s.getTime()+900*60*1e3),result:e>=new Date(s.getTime()+900*60*1e3)?"12":null,status:e>=new Date(s.getTime()+900*60*1e3)?"completed":"upcoming"},{time:new Date(s.getTime()+1140*60*1e3),result:e>=new Date(s.getTime()+1140*60*1e3)?"34":null,status:e>=new Date(s.getTime()+1140*60*1e3)?"completed":"upcoming"}]},{title:"STL Pares",variant:"variant-c",draws:[{time:new Date(s.getTime()+10.5*60*60*1e3),result:e>=new Date(s.getTime()+10.5*60*60*1e3)?"01-15":null,status:e>=new Date(s.getTime()+10.5*60*60*1e3)?"completed":"upcoming"},{time:new Date(s.getTime()+960*60*1e3),result:e>=new Date(s.getTime()+960*60*1e3)?"03-21":null,status:e>=new Date(s.getTime()+960*60*1e3)?"completed":"upcoming"},{time:new Date(s.getTime()+1200*60*1e3),result:e>=new Date(s.getTime()+1200*60*1e3)?"07-19":null,status:e>=new Date(s.getTime()+1200*60*1e3)?"completed":"upcoming"}]}]};function M({collector:e=b,stats:s=y,schedule:l=S()}){const[a,i]=r.useState(new Date);r.useEffect(()=>{const c=setInterval(()=>{i(new Date)},1e3);return()=>clearInterval(c)},[]),r.useEffect(()=>(document.body.classList.add("collector-bg"),()=>document.body.classList.remove("collector-bg")),[]);const[o,g]=r.useState(s);r.useEffect(()=>{const c=setInterval(()=>{g(n=>{const x=Math.floor(Math.random()*5e3),j=Math.floor(Math.random()*2e3);return{...n,collections:n.collections+x,payouts_tapal:n.payouts_tapal+j,processed_payouts:n.processed_payouts+(Math.random()>.7?1:0)}})},3e4);return()=>clearInterval(c)},[]);const v=r.useMemo(()=>N(e.name),[e.name]);return t.jsxs("div",{className:"collector-container","aria-live":"polite",children:[t.jsxs("header",{className:"collector-header",children:[t.jsx("h1",{children:"ðŸ’° Collector Dashboard"}),t.jsxs("div",{className:"header-right",children:[t.jsxs("div",{className:"user-info","aria-label":"Collector status",children:[t.jsx("div",{className:"user-avatar","aria-hidden":"true",children:v}),t.jsxs("div",{className:"user-details",children:[t.jsx("div",{className:"user-name",children:e.name}),t.jsxs("div",{className:"user-role",children:["Collector #",e.code]})]}),t.jsx("div",{className:"status-badge",children:e.status})]}),t.jsxs("div",{className:"datetime-pill",children:[T(a)," â€¢ ",f(a)]})]})]}),t.jsxs("section",{"aria-labelledby":"stats-title",children:[t.jsx("h2",{id:"stats-title",className:"sr-only",children:"Today's Collection Stats"}),t.jsxs("div",{className:"stats-grid",children:[t.jsx(d,{icon:"ðŸ’µ",value:m(o.collections),label:"Collections",live:!0}),t.jsx(d,{icon:"ðŸŽ¯",value:m(o.payouts_tapal),label:"Payouts / Tapal",live:!0}),t.jsx(d,{icon:"ðŸ‘¥",value:h(o.tellers),label:"Active Tellers"}),t.jsx(d,{icon:"âœ…",value:h(o.processed_payouts),label:"Processed Today"})]})]}),t.jsxs("main",{className:"bento-grid",children:[t.jsx(u,{to:"/collector/sales-collection",icon:"ðŸ’°",title:"Sales Collection",desc:"Collect remittances from tellers and update ledger records.",cta:"Collect Sales"}),t.jsx(u,{to:"/collector/payouts-tapal",icon:"ðŸŽ¯",title:"Payouts & Tapal",desc:"Process winner payouts or issue tapal for insufficient funds.",cta:"Process Payouts"}),t.jsx(u,{to:"/collector/reports-winners",icon:"ðŸ“Š",title:"Reports & Winners",desc:"Generate remittance and combined payouts/tapal reports.",cta:"View Reports"}),t.jsxs("section",{className:"bento-card large","aria-labelledby":"schedule-title",children:[t.jsx("div",{className:"card-icon","aria-hidden":"true",children:"ðŸ“…"}),t.jsx("div",{className:"card-title",id:"schedule-title",children:"Today's Draw Schedule"}),t.jsx("div",{className:"card-description",children:"Live countdown and results tracking"}),t.jsx("div",{className:"schedule-grid",children:l.map((c,n)=>t.jsx(C,{game:c,currentTime:a},n))})]})]})]})}function d({icon:e,value:s,label:l,live:a=!1}){return t.jsxs("div",{className:"stat-card","aria-live":a?"polite":void 0,children:[t.jsx("div",{className:"stat-icon","aria-hidden":"true",children:e}),t.jsx("div",{className:"stat-value",children:s}),t.jsx("div",{className:"stat-label",children:l})]})}function u({to:e,icon:s,title:l,desc:a,cta:i}){return t.jsxs(w,{className:"bento-card",to:e,"aria-label":l,children:[t.jsx("div",{className:"card-icon","aria-hidden":"true",children:s}),t.jsx("div",{className:"card-title",children:l}),t.jsx("div",{className:"card-description",children:a}),t.jsxs("span",{className:"card-cta","aria-hidden":"true",children:[i," â†’"]})]})}function C({game:e,currentTime:s}){const l=e.draws.find(a=>a.status==="upcoming"&&a.time>s);return t.jsxs("div",{className:`schedule-card ${e.variant}`,children:[t.jsx("div",{className:"schedule-title",children:e.title}),l&&t.jsxs("div",{className:"schedule-countdown",children:[t.jsx("div",{className:"countdown-label",children:"Next Draw"}),t.jsx("div",{className:"countdown-time",children:p(l.time)}),t.jsx("div",{className:"countdown-timer",children:D(l.time-s)})]}),t.jsx("div",{className:"schedule-draws",children:e.draws.map((a,i)=>t.jsxs("div",{className:`schedule-draw ${a.status}`,children:[t.jsx("div",{className:"draw-time",children:p(a.time)}),a.status==="completed"&&a.result&&t.jsxs("div",{className:"draw-result",children:[t.jsx("span",{className:"result-label",children:"Result:"}),t.jsx("span",{className:"result-numbers",children:a.result})]}),a.status==="upcoming"&&t.jsx("div",{className:"draw-status",children:a===l?"Next":"Upcoming"})]},i))})]})}export{M as default};
