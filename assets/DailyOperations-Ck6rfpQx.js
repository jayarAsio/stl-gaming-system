import{r as i,j as e,R as y}from"./index-ttmfNWme.js";import{r as te}from"./index-BafUED9v.js";const Re=()=>{const a=i.useCallback(()=>{const s=new Date;return new Date(s.getTime()-s.getTimezoneOffset()*6e4).toISOString().split("T")[0]},[]),[o]=i.useState(a),[d,n]=i.useState("tickets"),[m,b]=i.useState(""),[h,j]=i.useState(""),[r,V]=i.useState(o),[D,ae]=i.useState(""),[S,U]=i.useState(""),[w,le]=i.useState(o),[K,ie]=i.useState(""),[$,ne]=i.useState(""),[oe,de]=i.useState("active"),[_,G]=i.useState({open:!1,ticket:null}),[k,q]=i.useState({open:!1,request:null,action:null}),[p,L]=i.useState([]),[M,C]=i.useState([]),[ce,re]=i.useState(new Set),[me,he]=i.useState(!1);i.useEffect(()=>{const s=setTimeout(()=>j(m),300);return()=>clearTimeout(s)},[m]),i.useEffect(()=>{const s=setTimeout(()=>ne(K),300);return()=>clearTimeout(s)},[K]);const O=i.useCallback(()=>{const s=[{id:"AKL-00001",name:"TEODOSIO, ROSELIE"},{id:"AKL-00002",name:"PASTRANA, EMMA"},{id:"AKL-00003",name:"REGALADO, LAIRA JANE"},{id:"AKL-00004",name:"SOLIMBAD, ELIZABETH"},{id:"AKL-00005",name:"CRISOSTOMO, DIANA GAILE"},{id:"AKL-00006",name:"MARTINEZ, ANGELO"},{id:"AKL-00007",name:"SANTOS, MARIA"},{id:"AKL-00008",name:"DELA CRUZ, JOHN"}],t=["STL Pares","Last 2","Last 3","Swer3"],l=["11:00 AM","4:00 PM","9:00 PM"],c=["active","active","active","active","active","winning","voided"],g=[],x=new Date;for(let v=0;v<14;v++){const u=new Date(x);u.setDate(u.getDate()-v);const f=v===0?s.slice(0,5):s,A=v===0?45:Math.max(10,38-v*2);for(let W=0;W<A;W++){const Ae=Math.floor(Math.random()*10)+1,Z=[];let Q=0;for(let X=0;X<Ae;X++){const J=t[Math.floor(Math.random()*t.length)],ee=[10,20,50,100,200,500,1e3][Math.floor(Math.random()*7)];let R="";if(J==="STL Pares"){const se=String(Math.floor(Math.random()*40)+1).padStart(2,"0");let H=String(Math.floor(Math.random()*40)+1).padStart(2,"0");for(;se===H;)H=String(Math.floor(Math.random()*40)+1).padStart(2,"0");R=`${se}.${H}`}else J==="Last 2"?R=String(Math.floor(Math.random()*100)).padStart(2,"0"):R=String(Math.floor(Math.random()*1e3)).padStart(3,"0");Z.push({game:J,combo:R,amount:ee,drawTime:l[Math.floor(Math.random()*l.length)]}),Q+=ee}const ke=8+Math.floor(Math.random()*15),ye=Math.floor(Math.random()*60),z=new Date(u);z.setHours(ke,ye,Math.floor(Math.random()*60));const Y=c[Math.floor(Math.random()*c.length)],I=f[Math.floor(Math.random()*f.length)];g.push({id:`TKT${String(1e5+g.length).slice(-5)}`,tellerId:I.id,tellerName:I.name,teller:`${I.name} (${I.id})`,timestamp:z.toISOString(),bets:Z,total:Q,status:Y,voidReason:Y==="voided"?["Customer requested cancellation","Wrong combination entered","Duplicate entry by mistake","System error during processing"][Math.floor(Math.random()*4)]:null})}}return g.sort((v,u)=>new Date(u.timestamp)-new Date(v.timestamp))},[]),E=i.useCallback(()=>{const s=["TEODOSIO, ROSELIE (AKL-00001)","PASTRANA, EMMA (AKL-00002)","REGALADO, LAIRA JANE (AKL-00003)","SOLIMBAD, ELIZABETH (AKL-00004)","CRISOSTOMO, DIANA GAILE (AKL-00005)","MARTINEZ, ANGELO (AKL-00006)","SANTOS, MARIA (AKL-00007)","DELA CRUZ, JOHN (AKL-00008)"],t=["Customer requested cancellation","Wrong combination entered","Duplicate entry by mistake","Customer changed mind","Incorrect amount entered","System error during entry","Customer left before payment","Bet placed after draw time","Wrong draw time selected","Technical issue with printer"],l=[],c=new Date;return[{status:"pending",count:12},{status:"approved",count:18},{status:"rejected",count:8}].forEach(({status:x,count:v})=>{for(let u=0;u<v;u++){const f=x==="pending"?Math.floor(Math.random()*2):Math.floor(Math.random()*7)+1,A=new Date(c);A.setDate(A.getDate()-f),A.setHours(8+Math.floor(Math.random()*14),Math.floor(Math.random()*60)),l.push({id:`VR${String(1e3+l.length)}`,ticketId:`TKT${String(Math.floor(Math.random()*9e4)+1e4)}`,teller:s[Math.floor(Math.random()*s.length)],reason:t[Math.floor(Math.random()*t.length)],timestamp:A.toISOString(),status:x,reviewedBy:x!=="pending"?["Admin User","Supervisor","Manager"][Math.floor(Math.random()*3)]:null,reviewedAt:x!=="pending"?new Date(A.getTime()+Math.random()*72e5).toISOString():null})}}),l.sort((x,v)=>new Date(v.timestamp)-new Date(x.timestamp))},[]);i.useEffect(()=>{try{const s=localStorage.getItem("DO_TICKETS_V5"),t=localStorage.getItem("DO_VOID_REQUESTS_V5");if(s){const l=JSON.parse(s);L(l.length>0?l:O())}else{const l=O();L(l),localStorage.setItem("DO_TICKETS_V5",JSON.stringify(l))}if(t){const l=JSON.parse(t);C(l.length>0?l:E())}else{const l=E();C(l),localStorage.setItem("DO_VOID_REQUESTS_V5",JSON.stringify(l))}}catch(s){console.error("Error loading data:",s);const t=O(),l=E();L(t),C(l),localStorage.setItem("DO_TICKETS_V5",JSON.stringify(t)),localStorage.setItem("DO_VOID_REQUESTS_V5",JSON.stringify(l))}},[O,E]),i.useEffect(()=>{if(p.length===0)return;const s=setTimeout(()=>{localStorage.setItem("DO_TICKETS_V5",JSON.stringify(p))},1e3);return()=>clearTimeout(s)},[p]),i.useEffect(()=>{if(M.length===0)return;const s=setTimeout(()=>{localStorage.setItem("DO_VOID_REQUESTS_V5",JSON.stringify(M))},1e3);return()=>clearTimeout(s)},[M]),i.useEffect(()=>(_.open||k.open?document.body.classList.add("do-lock","do-blur-bg"):document.body.classList.remove("do-lock","do-blur-bg"),()=>{document.body.classList.remove("do-lock","do-blur-bg")}),[_.open,k.open]),i.useEffect(()=>{const s=()=>{he(window.scrollY>300)};return window.addEventListener("scroll",s,{passive:!0}),()=>window.removeEventListener("scroll",s)},[]);const ue=i.useMemo(()=>[...new Set(p.map(s=>s.teller))].sort(),[p]),B=i.useMemo(()=>{let s=p;if(h){const t=h.toLowerCase();s=s.filter(l=>l.id.toLowerCase().includes(t)||l.teller.toLowerCase().includes(t))}return r&&(s=s.filter(t=>t.timestamp.startsWith(r))),D&&(s=s.filter(t=>t.teller===D)),S&&(s=s.filter(t=>t.status===S)),s},[p,h,r,D,S]),P=i.useMemo(()=>{let s=M;if(h){const t=h.toLowerCase();s=s.filter(l=>l.ticketId.toLowerCase().includes(t)||l.teller.toLowerCase().includes(t)||l.reason.toLowerCase().includes(t))}return S&&(s=s.filter(t=>t.status===S)),s},[M,h,S]),T=i.useMemo(()=>{const s=[{id:"AKL-00001",name:"TEODOSIO, ROSELIE"},{id:"AKL-00002",name:"PASTRANA, EMMA"},{id:"AKL-00003",name:"REGALADO, LAIRA JANE"},{id:"AKL-00004",name:"SOLIMBAD, ELIZABETH"},{id:"AKL-00005",name:"CRISOSTOMO, DIANA GAILE"},{id:"AKL-00006",name:"MARTINEZ, ANGELO"},{id:"AKL-00007",name:"SANTOS, MARIA"},{id:"AKL-00008",name:"DELA CRUZ, JOHN"}],t=p.filter(l=>l.timestamp.startsWith(w));return s.map((l,c)=>{const g=t.filter(u=>u.tellerId===l.id),x=Array(24).fill(0);g.forEach(u=>{const f=new Date(u.timestamp).getHours();x[f]++});const v=g.filter(u=>u.status!=="voided").reduce((u,f)=>u+f.total,0);return{number:c+1,agentNo:l.id,agentName:l.name,hourlyData:x,totalTickets:g.length,totalSales:v}})},[p,w]),ve=i.useMemo(()=>{if(!$)return T;const s=$.toLowerCase();return T.filter(t=>t.agentName.toLowerCase().includes(s)||t.agentNo.toLowerCase().includes(s))},[T,$]),N=i.useMemo(()=>{if(d==="tickets"){const s=B;return{card1:{label:r!==o?"Selected Date Tickets":"Today's Tickets",value:s.length},card2:{label:r!==o?"Selected Date Sales":"Today's Sales",value:`â‚±${s.filter(t=>t.status!=="voided").reduce((t,l)=>t+l.total,0).toLocaleString()}`},card3:{label:"Active Tickets",value:s.filter(t=>t.status==="active").length},card4:{label:"Voided Tickets",value:s.filter(t=>t.status==="voided").length}}}else if(d==="activity"){const s=p.filter(c=>c.timestamp.startsWith(w)),t=T.filter(c=>c.totalTickets>0).length,l=T.length-t;return{card1:{label:"Total Tellers",value:T.length},card2:{label:"Active Tellers",value:t},card3:{label:"Absent Tellers",value:l},card4:{label:"Total Sales",value:`â‚±${s.filter(c=>c.status!=="voided").reduce((c,g)=>c+g.total,0).toLocaleString()}`}}}else{const s=P;return{card1:{label:"Total Requests",value:s.length},card2:{label:"Pending",value:s.filter(t=>t.status==="pending").length},card3:{label:"Approved",value:s.filter(t=>t.status==="approved").length},card4:{label:"Rejected",value:s.filter(t=>t.status==="rejected").length}}}},[d,B,P,r,w,o,p,T]),pe=i.useCallback(s=>{re(t=>{const l=new Set(t);return l.has(s)?l.delete(s):l.add(s),l})},[]),xe=i.useCallback(s=>{G({open:!0,ticket:s})},[]),je=i.useCallback(()=>{G({open:!1,ticket:null})},[]),Ne=i.useCallback((s,t)=>{q({open:!0,request:s,action:t})},[]),ge=i.useCallback(()=>{if(!k.request)return;const{request:s,action:t}=k;C(l=>l.map(c=>c.id===s.id?{...c,status:t,reviewedBy:"Admin User",reviewedAt:new Date().toISOString()}:c)),t==="approved"&&L(l=>l.map(c=>c.id===s.ticketId?{...c,status:"voided",voidReason:s.reason}:c)),q({open:!1,request:null,action:null})},[k]),be=i.useCallback(()=>{q({open:!1,request:null,action:null})},[]),Se=i.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),F=i.useCallback(s=>new Date(s).toLocaleString("en-PH",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),[]),fe=i.useCallback(s=>{const t={};return s.forEach(l=>{const c=`${l.game}_${l.drawTime}`;t[c]||(t[c]={game:l.game,drawTime:l.drawTime,bets:[]}),t[c].bets.push(l)}),Object.values(t)},[]),Te=i.useCallback(s=>s===0?"12 AM":s<12?`${String(s).padStart(2,"0")} AM`:s===12?"12 PM":`${String(s-12).padStart(2,"0")} PM`,[]);return e.jsxs("div",{className:"do-container",children:[e.jsxs("div",{className:"do-header",children:[e.jsxs("div",{className:"do-header-content",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"do-title",children:"Daily Operations"}),e.jsx("p",{className:"do-subtitle",children:"Monitor ticket entries, teller activity, and void requests in real-time"})]}),e.jsxs("div",{className:"do-header-actions",children:[e.jsxs("button",{className:`do-view-btn ${d==="tickets"?"active":""}`,onClick:()=>n("tickets"),children:[e.jsx("span",{children:"ðŸ“‹"})," Tickets"]}),e.jsxs("button",{className:`do-view-btn ${d==="activity"?"active":""}`,onClick:()=>n("activity"),children:[e.jsx("span",{children:"âš¡"})," Activity"]}),e.jsxs("button",{className:`do-view-btn ${d==="voids"?"active":""}`,onClick:()=>n("voids"),children:[e.jsx("span",{children:"ðŸš«"})," Voids",N.card2.value>0&&d==="voids"&&e.jsx("span",{className:"do-badge",children:N.card2.value})]})]})]}),e.jsx("div",{className:"do-status-bar",children:e.jsxs("div",{className:"do-stats-header",children:[e.jsxs("div",{className:"do-stat-item-header",children:[e.jsx("span",{className:"do-stat-label-header",children:N.card1.label}),e.jsx("span",{className:"do-stat-value-header",children:N.card1.value})]}),e.jsxs("div",{className:"do-stat-item-header",children:[e.jsx("span",{className:"do-stat-label-header",children:N.card2.label}),e.jsx("span",{className:"do-stat-value-header",children:N.card2.value})]}),e.jsxs("div",{className:"do-stat-item-header",children:[e.jsx("span",{className:"do-stat-label-header",children:N.card3.label}),e.jsx("span",{className:"do-stat-value-header",children:N.card3.value})]}),e.jsxs("div",{className:"do-stat-item-header",children:[e.jsx("span",{className:"do-stat-label-header",children:N.card4.label}),e.jsx("span",{className:"do-stat-value-header",children:N.card4.value})]})]})})]}),e.jsxs("div",{className:"do-card",children:[e.jsxs("div",{className:"do-filters",children:[d==="tickets"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"do-search",children:[e.jsx("span",{className:"do-search-icon",children:"ðŸ”"}),e.jsx("input",{type:"text",className:"do-input",placeholder:"Search tickets or tellers...",value:m,onChange:s=>b(s.target.value)})]}),e.jsx("input",{type:"date",className:"do-date-picker",value:r,onChange:s=>V(s.target.value),max:o}),e.jsxs("select",{className:"do-select",value:D,onChange:s=>ae(s.target.value),children:[e.jsx("option",{value:"",children:"All Tellers"}),ue.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{className:"do-select",value:S,onChange:s=>U(s.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"voided",children:"Voided"}),e.jsx("option",{value:"winning",children:"Winning"})]})]}),d==="activity"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"do-search",children:[e.jsx("span",{className:"do-search-icon",children:"ðŸ”"}),e.jsx("input",{type:"text",className:"do-input",placeholder:"Search teller name or ID...",value:K,onChange:s=>ie(s.target.value)})]}),e.jsx("input",{type:"date",className:"do-date-picker",value:w,onChange:s=>le(s.target.value),max:o})]}),d==="voids"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"do-search",children:[e.jsx("span",{className:"do-search-icon",children:"ðŸ”"}),e.jsx("input",{type:"text",className:"do-input",placeholder:"Search void requests...",value:m,onChange:s=>b(s.target.value)})]}),e.jsxs("select",{className:"do-select",value:S,onChange:s=>U(s.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"do-content",children:[d==="tickets"&&e.jsx(we,{tickets:B,onOpenDetail:xe,formatTimestamp:F}),d==="activity"&&e.jsx(Me,{tellerData:ve,subTab:oe,onSubTabChange:de,expandedTellers:ce,onToggleExpand:pe,formatHourLabel:Te}),d==="voids"&&e.jsx(Le,{requests:P,onVoidAction:Ne,formatTimestamp:F})]})]}),me&&e.jsx("button",{className:"do-back-to-top",onClick:Se,title:"Back to top",children:e.jsx("span",{className:"do-back-to-top-icon",children:"â†‘"})}),e.jsx(Ce,{modal:_,onClose:je,formatTimestamp:F,groupBets:fe}),e.jsx(Oe,{modal:k,onClose:be,onConfirm:ge})]})},we=y.memo(({tickets:a,onOpenDetail:o,formatTimestamp:d})=>a.length===0?e.jsx("div",{className:"do-list",children:e.jsx("div",{className:"do-empty",children:"No tickets found"})}):e.jsx("div",{className:"do-list",children:a.map(n=>e.jsx("div",{className:"do-ticket-item",children:e.jsxs("div",{className:"do-ticket-header",children:[e.jsxs("div",{className:"do-ticket-main",children:[e.jsx("div",{className:"do-ticket-id",children:n.id}),e.jsx("div",{className:"do-ticket-teller",children:n.teller}),e.jsxs("div",{className:"do-ticket-meta",children:[n.bets.length," bet",n.bets.length!==1?"s":""," â€¢ â‚±",n.total.toLocaleString()]})]}),e.jsxs("div",{className:"do-ticket-side",children:[e.jsx("span",{className:`do-status-pill ${n.status}`,children:n.status.toUpperCase()}),e.jsx("div",{className:"do-ticket-time",children:d(n.timestamp)}),e.jsx("button",{className:"do-expand-btn",onClick:()=>o(n),children:"View Details"})]})]})},n.id))})),Me=y.memo(({tellerData:a,subTab:o,onSubTabChange:d,expandedTellers:n,onToggleExpand:m,formatHourLabel:b})=>{const h=i.useMemo(()=>a.filter(r=>r.totalTickets>0),[a]),j=i.useMemo(()=>a.filter(r=>r.totalTickets===0),[a]);return e.jsxs("div",{className:"do-list",children:[e.jsxs("div",{className:"do-subtab-bar",children:[e.jsxs("button",{className:`do-subtab ${o==="active"?"active":""}`,onClick:()=>d("active"),children:["âœ“ Active Tellers (",h.length,")"]}),e.jsxs("button",{className:`do-subtab ${o==="absent"?"active":""}`,onClick:()=>d("absent"),children:["âŠ˜ Absent Tellers (",j.length,")"]})]}),o==="active"&&e.jsx("div",{className:"do-activity-section",children:h.length===0?e.jsx("div",{className:"do-empty",children:"No active tellers found"}):e.jsx("div",{className:"do-teller-list-container",children:h.map(r=>{const V=n.has(r.agentNo);return e.jsx(De,{teller:r,isExpanded:V,onToggleExpand:m,formatHourLabel:b},r.agentNo)})})}),o==="absent"&&e.jsx("div",{className:"do-activity-section",children:j.length===0?e.jsx("div",{className:"do-empty",children:"No absent tellers found"}):e.jsx("div",{className:"do-absent-list",children:j.map(r=>e.jsxs("div",{className:"do-absent-teller",children:[e.jsx("div",{className:"do-absent-avatar",children:r.agentName.charAt(0)}),e.jsxs("div",{className:"do-absent-details",children:[e.jsx("div",{className:"do-absent-name",children:r.agentName}),e.jsx("div",{className:"do-absent-id",children:r.agentNo})]}),e.jsxs("div",{className:"do-absent-badge",children:[e.jsx("span",{className:"do-absent-icon",children:"âŠ˜"}),"No Activity"]})]},r.agentNo))})})]})}),De=y.memo(({teller:a,isExpanded:o,onToggleExpand:d,formatHourLabel:n})=>e.jsxs("div",{className:"do-teller-list-item",children:[e.jsxs("div",{className:"do-teller-row",children:[e.jsxs("div",{className:"do-teller-main-info",children:[e.jsx("div",{className:"do-teller-avatar-small",children:a.agentName.charAt(0)}),e.jsxs("div",{className:"do-teller-details",children:[e.jsx("div",{className:"do-teller-name-row",children:a.agentName}),e.jsx("div",{className:"do-teller-id-row",children:a.agentNo})]})]}),e.jsxs("div",{className:"do-teller-stats-row",children:[e.jsxs("div",{className:"do-stat-mini",children:[e.jsx("span",{className:"do-stat-mini-icon",children:"ðŸŽ«"}),e.jsx("span",{className:"do-stat-mini-value",children:a.totalTickets}),e.jsx("span",{className:"do-stat-mini-label",children:"tickets"})]}),e.jsxs("div",{className:"do-stat-mini",children:[e.jsx("span",{className:"do-stat-mini-icon",children:"ðŸ’°"}),e.jsxs("span",{className:"do-stat-mini-value",children:["â‚±",a.totalSales.toLocaleString()]}),e.jsx("span",{className:"do-stat-mini-label",children:"sales"})]})]}),e.jsx("button",{className:"do-view-breakdown-btn",onClick:()=>d(a.agentNo),children:o?"â–² Hide Details":"â–¼ View Breakdown"})]}),o&&e.jsxs("div",{className:"do-teller-breakdown",children:[e.jsxs("div",{className:"do-breakdown-header",children:[e.jsx("h4",{children:"Hourly Activity Breakdown"}),e.jsx("span",{className:"do-breakdown-subtitle",children:"Tickets processed per hour"})]}),e.jsx("div",{className:"do-activity-chart-expanded",children:e.jsx("div",{className:"do-chart-bars-expanded",children:a.hourlyData.map((m,b)=>{if(m===0)return null;const h=Math.max(...a.hourlyData),j=h>0?m/h*100:0;return e.jsxs("div",{className:"do-bar-item-expanded",children:[e.jsxs("div",{className:"do-bar-info",children:[e.jsx("span",{className:"do-bar-label",children:n(b)}),e.jsxs("span",{className:"do-bar-count",children:[m," ticket",m!==1?"s":""]})]}),e.jsx("div",{className:"do-bar-visual",children:e.jsx("div",{className:"do-bar-fill",style:{width:`${j}%`},children:e.jsx("span",{className:"do-bar-percent",children:m})})})]},b)})})}),e.jsxs("div",{className:"do-breakdown-summary",children:[e.jsxs("div",{className:"do-summary-item",children:[e.jsx("span",{className:"do-summary-label",children:"Peak Hour:"}),e.jsx("span",{className:"do-summary-value",children:n(a.hourlyData.indexOf(Math.max(...a.hourlyData)))})]}),e.jsxs("div",{className:"do-summary-item",children:[e.jsx("span",{className:"do-summary-label",children:"Total Tickets:"}),e.jsx("span",{className:"do-summary-value",children:a.totalTickets})]}),e.jsxs("div",{className:"do-summary-item",children:[e.jsx("span",{className:"do-summary-label",children:"Total Sales:"}),e.jsxs("span",{className:"do-summary-value",children:["â‚±",a.totalSales.toLocaleString()]})]}),e.jsxs("div",{className:"do-summary-item",children:[e.jsx("span",{className:"do-summary-label",children:"Avg per Ticket:"}),e.jsxs("span",{className:"do-summary-value",children:["â‚±",a.totalTickets>0?Math.round(a.totalSales/a.totalTickets).toLocaleString():"0"]})]})]})]})]})),Le=y.memo(({requests:a,onVoidAction:o,formatTimestamp:d})=>a.length===0?e.jsx("div",{className:"do-list",children:e.jsx("div",{className:"do-empty",children:"No void requests found"})}):e.jsx("div",{className:"do-list",children:a.map(n=>e.jsxs("div",{className:"do-void-item",children:[e.jsxs("div",{className:"do-void-header",children:[e.jsxs("div",{className:"do-void-main",children:[e.jsxs("div",{className:"do-void-id",children:["Request #",n.id]}),e.jsxs("div",{className:"do-void-ticket",children:["Ticket: ",n.ticketId]}),e.jsx("div",{className:"do-void-teller",children:n.teller})]}),e.jsxs("div",{className:"do-void-side",children:[e.jsx("span",{className:`do-status-pill ${n.status}`,children:n.status.toUpperCase()}),e.jsx("div",{className:"do-void-time",children:d(n.timestamp)})]})]}),e.jsxs("div",{className:"do-void-reason",children:[e.jsx("strong",{children:"Reason:"})," ",n.reason]}),n.reviewedBy&&e.jsxs("div",{className:"do-void-review",children:["Reviewed by ",n.reviewedBy," on ",d(n.reviewedAt)]}),n.status==="pending"&&e.jsxs("div",{className:"do-void-actions",children:[e.jsx("button",{className:"do-btn-approve",onClick:()=>o(n,"approved"),children:"âœ“ Approve"}),e.jsx("button",{className:"do-btn-reject",onClick:()=>o(n,"rejected"),children:"âœ• Reject"})]})]},n.id))})),Ce=y.memo(({modal:a,onClose:o,formatTimestamp:d,groupBets:n})=>!a.open||!a.ticket?null:te.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"do-modal-overlay active",onClick:o}),e.jsx("div",{className:"do-modal-container active",children:e.jsxs("div",{className:"do-modal-content",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"do-modal-header",children:[e.jsx("h3",{children:"Ticket Details"}),e.jsx("button",{className:"do-modal-close",onClick:o,children:"Ã—"})]}),e.jsxs("div",{className:"do-modal-body",children:[e.jsxs("div",{className:"do-detail-card",children:[e.jsxs("div",{className:"do-detail-row",children:[e.jsx("span",{className:"do-detail-label",children:"Ticket ID:"}),e.jsx("span",{className:"do-detail-value",children:a.ticket.id})]}),e.jsxs("div",{className:"do-detail-row",children:[e.jsx("span",{className:"do-detail-label",children:"Teller:"}),e.jsx("span",{className:"do-detail-value",children:a.ticket.teller})]}),e.jsxs("div",{className:"do-detail-row",children:[e.jsx("span",{className:"do-detail-label",children:"Timestamp:"}),e.jsx("span",{className:"do-detail-value",children:d(a.ticket.timestamp)})]}),e.jsxs("div",{className:"do-detail-row",children:[e.jsx("span",{className:"do-detail-label",children:"Status:"}),e.jsx("span",{className:`do-status-pill ${a.ticket.status}`,children:a.ticket.status.toUpperCase()})]}),e.jsxs("div",{className:"do-detail-row",children:[e.jsx("span",{className:"do-detail-label",children:"Total Bets:"}),e.jsx("span",{className:"do-detail-value",children:a.ticket.bets.length})]}),e.jsxs("div",{className:"do-detail-row",children:[e.jsx("span",{className:"do-detail-label",children:"Total Amount:"}),e.jsxs("span",{className:"do-detail-value",children:["â‚±",a.ticket.total.toLocaleString()]})]})]}),e.jsxs("div",{className:"do-bets-detail",children:[e.jsx("h4",{children:"Bet Details"}),n(a.ticket.bets).map((m,b)=>e.jsxs("div",{className:"do-bet-group-detail",children:[e.jsxs("div",{className:"do-bet-group-header-detail",children:[e.jsx("strong",{children:m.game})," â€¢ Draw: ",m.drawTime]}),e.jsx("div",{className:"do-bet-list-detail",children:m.bets.map((h,j)=>{const r=a.ticket.status==="winning"&&j===0;return e.jsxs("div",{className:`do-bet-line-detail ${r?"winning":""}`,children:[e.jsx("span",{className:"do-bet-combo-detail",children:h.combo}),e.jsxs("span",{className:"do-bet-amount-detail",children:["â‚±",h.amount.toLocaleString()]}),r&&e.jsx("span",{className:"do-win-badge-detail",children:"WIN"})]},j)})})]},b))]}),a.ticket.voidReason&&e.jsxs("div",{className:"do-void-reason-detail",children:[e.jsx("strong",{children:"Void Reason:"})," ",a.ticket.voidReason]})]}),e.jsx("div",{className:"do-modal-footer",children:e.jsx("button",{className:"do-btn-secondary",onClick:o,children:"Close"})})]})})]}),document.body)),Oe=y.memo(({modal:a,onClose:o,onConfirm:d})=>!a.open||!a.request?null:te.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"do-modal-overlay active",onClick:o}),e.jsx("div",{className:"do-modal-container active",children:e.jsxs("div",{className:"do-modal-content",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"do-modal-header",children:[e.jsxs("h3",{children:["Confirm ",a.action==="approved"?"Approval":"Rejection"]}),e.jsx("button",{className:"do-modal-close",onClick:o,children:"Ã—"})]}),e.jsxs("div",{className:"do-modal-body",children:[e.jsxs("p",{children:["Are you sure you want to ",e.jsx("strong",{children:a.action==="approved"?"approve":"reject"})," this void request?"]}),e.jsxs("div",{className:"do-confirm-details",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Request ID:"})," ",a.request.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ticket ID:"})," ",a.request.ticketId]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Teller:"})," ",a.request.teller]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Reason:"})," ",a.request.reason]})]})]}),e.jsxs("div",{className:"do-modal-footer",children:[e.jsx("button",{className:"do-btn-secondary",onClick:o,children:"Cancel"}),e.jsxs("button",{className:a.action==="approved"?"do-btn-approve":"do-btn-reject",onClick:d,children:["Confirm ",a.action==="approved"?"Approval":"Rejection"]})]})]})})]}),document.body));export{Re as default};
