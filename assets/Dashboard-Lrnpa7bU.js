import{r as n,u as G,b as D,a as M,j as a,L as N,O as R}from"./index-Dt9TJAyj.js";const P=[{key:"dashboard",label:"Dashboard",icon:"📊",path:"/game-administrator"},{key:"configuration",label:"Configuration",icon:"⚙️",path:"/game-administrator/configuration"},{key:"user-management",label:"User Management",icon:"👥",path:"/game-administrator/user-management"},{key:"daily-operations",label:"Daily Operations",icon:"📋",path:"/game-administrator/daily-operations"},{key:"draw-management",label:"Draw Management",icon:"🎲",path:"/game-administrator/draw-management"},{key:"enforcement",label:"Enforcement",icon:"🛡️",path:"/game-administrator/enforcement"},{key:"reports",label:"Reports",icon:"📈",path:"/game-administrator/reports"}],U=()=>{const[s,l]=n.useState(!1),[i,r]=n.useState(!1),[w,p]=n.useState(!0),[c,k]=n.useState(0),[m,b]=n.useState(!1),d=G(),v=D(),u=n.useRef(null),E=n.useRef(null),{user:o,logout:L,isAuthenticated:x,loading:g}=M(),f=o?{initials:o.fullName?.split(" ").map(e=>e[0]).join("")||"GA",name:o.fullName||"Game Admin",role:o.role==="game-administrator"?"Game Administrator":o.role,email:o.email}:{initials:"GA",name:"Game Admin",role:"Game Administrator"};n.useEffect(()=>{!g&&!x&&v("/",{replace:!0})},[x,g,v]);const S=async()=>{if(!m)try{b(!0),r(!1),await L()}catch(e){console.error("Logout error:",e),b(!1)}};n.useEffect(()=>{const e=()=>{const t=window.scrollY;t<c||t<10?p(!0):t>c&&t>10&&p(!1),k(t)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[c]),n.useEffect(()=>{l(!1),r(!1),window.scrollTo(0,0)},[d.pathname]),n.useEffect(()=>(s&&window.innerWidth<=768?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[s]),n.useEffect(()=>{const e=t=>{t.key==="Escape"&&(i?r(!1):s&&l(!1))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,i]),n.useEffect(()=>{const e=t=>{u.current&&!u.current.contains(t.target)&&r(!1)};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i]);const h=e=>e==="/game-administrator"?d.pathname===e:d.pathname.startsWith(e),A=()=>{l(e=>!e)},C=()=>{l(!1)},y=()=>{l(!1),r(!1)},j=()=>{r(e=>!e)},O=()=>{const e=d.pathname;return e==="/game-administrator"?"Dashboard":e.includes("configuration")?"Configuration":e.includes("user-management")?"User Management":e.includes("daily-operations")?"Daily Operations":e.includes("draw-management")?"Draw Management":e.includes("enforcement")?"Enforcement":e.includes("reports")?"Reports":"Game Administrator"};return g?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",fontSize:"1.25rem",color:"#6b7280"},children:"Loading..."}):a.jsxs("div",{className:`ga-layout ${s?"sidebar-open":""}`,children:[!s&&a.jsx("header",{className:`ga-header ${w?"ga-header-visible":"ga-header-hidden"}`,children:a.jsxs("div",{className:"ga-header-container",children:[a.jsxs("button",{className:"ga-header-menu-btn",onClick:A,"aria-label":"Toggle menu",children:[a.jsx("span",{className:"ga-hamburger-line"}),a.jsx("span",{className:"ga-hamburger-line"}),a.jsx("span",{className:"ga-hamburger-line"})]}),a.jsxs("div",{className:"ga-header-content",children:[a.jsx("h1",{className:"ga-header-title",children:O()}),a.jsx("p",{className:"ga-header-subtitle",children:"Game Administrator"})]})]})}),s&&a.jsx("div",{className:"ga-scrim",onClick:C,"aria-hidden":"true"}),a.jsxs("aside",{ref:E,className:`ga-sidebar ${s?"is-open":""}`,id:"gaSidebar","aria-hidden":!s&&window.innerWidth<=768,children:[a.jsx("div",{className:"ga-sidebar-header",children:a.jsxs(N,{to:"/game-administrator",className:"ga-brand",onClick:y,children:[a.jsx("div",{className:"ga-brand-glow"}),a.jsx("span",{className:"ga-brand-text",children:"Game Administrator"})]})}),a.jsx("nav",{className:"ga-nav","aria-label":"Primary navigation",children:a.jsx("ul",{className:"ga-nav-menu",children:P.map(e=>a.jsx("li",{className:"ga-nav-item",children:a.jsxs(N,{to:e.path,className:`ga-nav-link ${h(e.path)?"active":""}`,"aria-current":h(e.path)?"page":void 0,onClick:y,children:[a.jsx("span",{className:"ga-nav-icon",children:e.icon}),a.jsx("span",{className:"ga-nav-label",children:e.label}),h(e.path)&&a.jsx("span",{className:"ga-nav-indicator"})]})},e.key))})}),a.jsx("div",{className:"ga-sidebar-footer",children:a.jsxs("div",{ref:u,className:`ga-sidebar-profile ${i?"menu-open":""}`,onClick:j,role:"button",tabIndex:0,"aria-expanded":i,"aria-label":"User profile menu",onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),j())},children:[a.jsxs("div",{className:"ga-profile-main",children:[a.jsxs("div",{className:"ga-profile-avatar",children:[a.jsx("span",{children:f.initials}),a.jsx("div",{className:"ga-avatar-ring"})]}),a.jsxs("div",{className:"ga-profile-info",children:[a.jsx("div",{className:"ga-profile-name",children:f.name}),a.jsx("div",{className:"ga-profile-role",children:f.role})]}),a.jsx("span",{className:"ga-profile-chevron",children:i?"▲":"▼"})]}),i&&a.jsx("div",{className:"ga-profile-menu",children:a.jsxs("button",{onClick:S,className:"ga-profile-menu-item logout",disabled:m,type:"button",children:[a.jsx("span",{children:"🚪"}),a.jsx("span",{children:m?"Logging out...":"Logout"})]})})]})})]}),a.jsx("main",{className:"ga-main",children:a.jsx(R,{})})]})};export{U as default};
