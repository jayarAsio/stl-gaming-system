import{r as l,j as e,L as H}from"./index-CkeDE7Hv.js";/* empty css               */const T=[{time:"2:00 PM",date:"Jan 15, 2025",games:{"STL Pares":{winning:"12.25",multiplier:"1:700",winners:[{ref:"TKT12345678",bet:1,claimed:!1,bettedNumber:"12.25"},{ref:"TKT23456789",bet:2,claimed:!0,bettedNumber:"12.25"},{ref:"TKT34567890",bet:1,claimed:!1,bettedNumber:"12.25"}]},"Last 2":{winning:"47",multiplier:"1:100",winners:[{ref:"TKT45678901",bet:5,claimed:!0,bettedNumber:"47"},{ref:"TKT56789012",bet:2,claimed:!1,bettedNumber:"47"}]},"Last 3":{winning:"358",multiplier:"1:100",winners:[{ref:"TKT67890123",bet:3,claimed:!1,bettedNumber:"358"}]},Swer3:{winning:"724",multiplier:"1:100",winners:[]}}},{time:"5:00 PM",date:"Jan 15, 2025",games:{"STL Pares":{winning:"03.17",multiplier:"1:700",winners:[{ref:"TKT78901234",bet:3,claimed:!1,bettedNumber:"03.17"}]},"Last 2":{winning:"89",multiplier:"1:100",winners:[{ref:"TKT89012345",bet:4,claimed:!0,bettedNumber:"89"},{ref:"TKT90123456",bet:1,claimed:!1,bettedNumber:"89"},{ref:"TKT01234567",bet:3,claimed:!0,bettedNumber:"89"}]},"Last 3":{winning:"142",multiplier:"1:100",winners:[]},Swer3:{winning:"967",multiplier:"1:100",winners:[{ref:"TKT12340987",bet:2,claimed:!1,bettedNumber:"967"}]}}},{time:"9:00 PM",date:"Jan 15, 2025",games:{"STL Pares":{winning:"28.41",multiplier:"1:700",winners:[]},"Last 2":{winning:"63",multiplier:"1:100",winners:[{ref:"TKT23451098",bet:6,claimed:!1,bettedNumber:"63"}]},"Last 3":{winning:"507",multiplier:"1:100",winners:[{ref:"TKT34562109",bet:5,claimed:!0,bettedNumber:"507"},{ref:"TKT45673210",bet:2,claimed:!1,bettedNumber:"507"}]},Swer3:{winning:"183",multiplier:"1:100",winners:[]}}}],Q=()=>{const[w,L]=l.useState(""),[f,R]=l.useState("all"),[j,F]=l.useState("all"),[M,N]=l.useState(""),[c,b]=l.useState(null),[O,y]=l.useState(!1),[k,K]=l.useState({show:!1,message:"",type:"success"}),o=l.useMemo(()=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",maximumFractionDigits:0}),[]),g=l.useCallback(s=>{if(!s)return"";const t=String(s).toUpperCase().replace(/^TKT/i,"").replace(/\D/g,"").slice(0,8);return t?`TKT${t}`:"TKT"},[]),p=l.useCallback(s=>/^TKT\d{8}$/.test(s),[]),u=l.useCallback(s=>{if(typeof s=="number")return s;if(typeof s=="string"){const a=s.match(/^\s*(\d+)\s*:\s*(\d+)\s*$/);if(a){const i=Number(a[1]),r=Number(a[2]);return i?r/i:0}const t=Number(s);if(Number.isFinite(t))return t}return 0},[]),h=l.useCallback((s,a)=>Math.round(Number(s)*Number(a)),[]),x=l.useCallback((s,a="success")=>{K({show:!0,message:s,type:a}),setTimeout(()=>K(t=>({...t,show:!1})),4e3)},[]),E=l.useMemo(()=>{const s=new Set;return T.forEach(a=>{Object.keys(a.games).forEach(t=>s.add(t))}),Array.from(s)},[]),v=l.useMemo(()=>{let s=0,a=0,t=0,i=0,r=0,n=0;return T.forEach(d=>{Object.values(d.games).forEach(m=>{const C=u(m.multiplier);m.winners.forEach($=>{s++;const S=h($.bet,C);a+=S,$.claimed?(t++,r+=S):(i++,n+=S)})})}),{totalWinners:s,totalPayout:a,totalClaimed:t,totalUnclaimed:i,claimedAmount:r,unclaimedAmount:n,claimRate:s>0?(t/s*100).toFixed(1):0}},[u,h]),P=l.useMemo(()=>T.map(s=>({...s,games:Object.fromEntries(Object.entries(s.games).filter(([a])=>!(f!=="all"&&a!==f)).map(([a,t])=>[a,{...t,winners:t.winners.filter(i=>!(j!=="all"&&(j==="claimed"&&!i.claimed||j==="unclaimed"&&i.claimed)))}]))})).filter(s=>Object.keys(s.games).length>0),[f,j]),W=l.useCallback(async(s=w)=>{const a=g(s);if(!a||a==="TKT"){b(null),N("");return}if(!p(a)){b({success:!1,title:"Invalid ticket format",message:"Please enter a reference like: TKT12345678 (8 digits)."});return}y(!0),setTimeout(()=>{let t=null;for(const i of T){for(const[r,n]of Object.entries(i.games)){const d=n.winners.find(m=>String(m.ref).toUpperCase()===a);if(d){const m=u(n.multiplier);t={drawTime:i.time,drawDate:i.date,game:r,winning:n.winning,bet:d.bet,amount:h(d.bet,m),multiplier:m,claimed:d.claimed,ticketRef:a,bettedNumber:d.bettedNumber};break}}if(t)break}t?(b({success:!0,title:"🎉 Congratulations! Your ticket is a WINNER!",data:t}),N(a),x(`Winning ticket found: ${o.format(t.amount)}!`,"success")):(b({success:!1,title:"No winnings found for this ticket",message:`Ticket ${a} did not match any winners in the current draws.`}),N(""),x("No winnings found for this ticket","info")),y(!1)},300)},[w,g,p,u,h,o,x]),D=l.useCallback(s=>{const a=g(s.target.value);L(a),p(a)?W(a):(a==="TKT"||a==="")&&(b(null),N(""))},[g,p,W]),I=l.useCallback(s=>{x(`Claim status updated for ${s}`,"info")},[x]),A=()=>e.jsxs("div",{className:"statistics-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:v.totalWinners}),e.jsx("div",{className:"stat-label",children:"Total Winners"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:o.format(v.totalPayout)}),e.jsx("div",{className:"stat-label",children:"Total Payout"})]}),e.jsxs("div",{className:"stat-card claimed",children:[e.jsx("div",{className:"stat-value",children:v.totalClaimed}),e.jsx("div",{className:"stat-label",children:"Claims Processed"})]}),e.jsxs("div",{className:"stat-card unclaimed",children:[e.jsx("div",{className:"stat-value",children:v.totalUnclaimed}),e.jsx("div",{className:"stat-label",children:"Pending Claims"})]})]}),G=({winner:s,game:a,drawTime:t})=>{const i=u(a.multiplier),r=h(s.bet,i),n=s.ref===M;return e.jsxs("div",{className:`winner-item ${n?"highlighted":""} ${s.claimed?"claimed":"unclaimed"}`,role:"listitem","data-ref":s.ref,children:[e.jsxs("div",{className:"winner-main",children:[e.jsxs("div",{className:"winner-ref",children:["🎫 ",s.ref]}),e.jsxs("div",{className:"winner-sub",children:["Bet ",o.format(s.bet)," on ",e.jsx("span",{className:"betted-number",children:s.bettedNumber})," × ",i," • ",t]})]}),e.jsxs("div",{className:"winner-actions",children:[e.jsx("div",{className:"winner-amount",children:o.format(r)}),e.jsx("div",{className:`claim-status ${s.claimed?"claimed":"pending"}`,children:s.claimed?"✅ Claimed":"⏳ Pending"}),e.jsx("button",{className:"btn-claim-toggle",onClick:()=>I(s.ref),"aria-label":`Toggle claim status for ${s.ref}`,children:s.claimed?"Mark Unclaimed":"Mark Claimed"})]})]})},U=({gameName:s,gameData:a,drawTime:t})=>{const i=a.winners.length>0,r={"STL Pares":"🎯","Last 2":"🎲","Last 3":"🎰",Swer3:"🎪"};return e.jsxs("article",{className:`game-item ${i?"winner":""}`,children:[i&&e.jsx("div",{className:"winner-badge",children:"WINNER!"}),e.jsxs("div",{className:"game-header",children:[e.jsxs("div",{className:"game-name",children:[e.jsx("span",{className:"game-icon",children:r[s]||"🎮"}),s]}),e.jsx("div",{className:"game-multiplier",children:a.multiplier})]}),e.jsxs("div",{className:"winning-number",role:"group","aria-label":"Draw Result",children:[e.jsx("span",{className:"result-label",children:"Draw Result"}),e.jsx("span",{className:"result-value",children:a.winning})]}),e.jsx("div",{className:"winners-section",children:i?e.jsx("div",{className:"winners-list",role:"list",children:a.winners.map((n,d)=>e.jsx(G,{winner:n,game:a,drawTime:t},`${n.ref}-${d}`))}):e.jsx("div",{className:"no-winners",children:"No winners"})})]})},B=()=>c?e.jsxs("div",{className:`result-card ${c.success?"is-success":"is-error"}`,children:[e.jsx("div",{className:"result-title",children:c.title}),c.success&&c.data?e.jsx("div",{className:"result-content",children:e.jsxs("div",{className:"result-details",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Ticket:"})," ",c.data.ticketRef]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Draw:"})," ",c.data.drawTime," – ",c.data.drawDate]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Game:"})," ",c.data.game]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Betted Number:"})," ",e.jsx("span",{className:"betted-number-result",children:c.data.bettedNumber})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Winning Number:"})," ",c.data.winning]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Bet Amount:"})," ",o.format(c.data.bet)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Winnings:"})," ",o.format(c.data.amount)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:`claim-badge ${c.data.claimed?"claimed":"pending"}`,children:c.data.claimed?"✅ Claimed":"⏳ Pending Claim"})]})]})}):e.jsx("div",{className:"result-message",children:c.message})]}):null;return e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"content",children:[e.jsx("h1",{children:"Check Winners"}),e.jsx("p",{children:"Search tickets and view winning results"})]}),e.jsxs(H,{to:"/teller",className:"back-button","aria-label":"Back to Dashboard",children:[e.jsx("span",{"aria-hidden":"true",children:"←"})," Back To Dashboard"]})]}),e.jsxs("section",{className:"card statistics-section",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:"📊"}),"Winning Statistics"]}),e.jsx(A,{})]}),e.jsxs("section",{className:"card search-section",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:"🔍"}),"Ticket Search"]}),e.jsxs("div",{className:"search-controls",children:[e.jsxs("div",{className:"search-input-group",children:[e.jsx("label",{htmlFor:"ticketRef",className:"form-label",children:"Ticket Reference"}),e.jsxs("div",{className:"input-with-status",children:[e.jsx("input",{type:"text",className:"form-input",id:"ticketRef",placeholder:"TKT######## (e.g., TKT12345678)",value:w,onChange:D,maxLength:11,autoComplete:"off"}),O&&e.jsx("div",{className:"search-spinner",children:"🔍"})]})]}),e.jsxs("div",{className:"filters-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"gameFilter",className:"form-label",children:"Game Type"}),e.jsxs("select",{id:"gameFilter",className:"form-select",value:f,onChange:s=>R(s.target.value),children:[e.jsx("option",{value:"all",children:"All Games"}),E.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"claimFilter",className:"form-label",children:"Claim Status"}),e.jsxs("select",{id:"claimFilter",className:"form-select",value:j,onChange:s=>F(s.target.value),children:[e.jsx("option",{value:"all",children:"All Tickets"}),e.jsx("option",{value:"claimed",children:"Claimed Only"}),e.jsx("option",{value:"unclaimed",children:"Unclaimed Only"})]})]})]})]}),e.jsx(B,{})]}),e.jsx("section",{className:"draws-section",children:P.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"🎫"}),e.jsx("div",{className:"empty-title",children:"No Results Found"}),e.jsx("div",{className:"empty-text",children:"Try adjusting your filters to see more results."})]}):P.map((s,a)=>{const t=Object.values(s.games).reduce((r,n)=>r+n.winners.length,0),i=Object.values(s.games).reduce((r,n)=>{const d=u(n.multiplier);return r+n.winners.reduce((m,C)=>m+h(C.bet,d),0)},0);return e.jsxs("div",{className:"draw-card",children:[e.jsxs("header",{className:"draw-header",children:[e.jsxs("div",{className:"draw-info",children:[e.jsxs("div",{className:"draw-time",children:[s.time," Draw"]}),e.jsx("div",{className:"draw-date",children:s.date})]}),e.jsxs("div",{className:"draw-stats",children:[e.jsxs("div",{className:"stat-chip",children:[t," Winner",t!==1?"s":""]}),e.jsx("div",{className:"stat-chip payout",children:o.format(i)})]})]}),e.jsx("div",{className:"draw-body",children:e.jsx("div",{className:"games-grid",children:Object.entries(s.games).map(([r,n])=>e.jsx(U,{gameName:r,gameData:n,drawTime:s.time},r))})})]},a)})}),k.show&&e.jsx("div",{className:`toast show ${k.type}`,role:"status","aria-live":"polite","aria-atomic":"true",children:k.message})]})};export{Q as default};
