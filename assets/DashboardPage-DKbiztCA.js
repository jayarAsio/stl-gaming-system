import{a as c,b as F,j as s}from"./index-AXjc9jp2.js";const q=()=>{const[j,f]=c.useState(new Date),[l,k]=c.useState("today"),[C,m]=c.useState(!1),h=F();c.useEffect(()=>{const e=setInterval(()=>f(new Date),1e3);return()=>clearInterval(e)},[]);const r=c.useCallback((e,i)=>{try{h?h(e):alert(i)}catch{alert(i)}},[h]),S=()=>r("/operation-support/daily-ledgers","Redirecting to Daily Ledgers page..."),R=()=>r("/operation-support/balances","Redirecting to Balances page..."),A=()=>r("/operation-support/activities","Showing all activities..."),w=()=>r("/operation-support/areas","Showing area details..."),P=()=>r("/operation-support/leaderboard","Showing full leaderboard..."),T=()=>m(!0),N=(e,i,d="text/csv;charset=utf-8;")=>{const o=new Blob([i],{type:d}),t=URL.createObjectURL(o),x=document.createElement("a");x.href=t,x.download=e,x.click(),URL.revokeObjectURL(t)},v=e=>{if(!e.length)return"";const i=Object.keys(e[0]),d=o=>{if(o==null)return"";const t=String(o).replace(/"/g,'""');return/[",\n]/.test(t)?`"${t}"`:t};return[i.join(","),...e.map(o=>i.map(t=>d(o[t])).join(","))].join(`
`)},p=e=>{const d=[{title:"Summary",rows:[{period:l,totalSales:a.totalSales,totalPayouts:a.totalPayouts,totalRemittances:a.totalRemittances,netRevenue:a.netRevenue,activeTellers:a.activeTellers,activeCollectors:a.activeCollectors,pendingShortages:a.pendingShortages,shortageAmount:a.shortageAmount,averageTicket:a.averageTicket,transactionCount:a.transactionCount}]},{title:"AreaPerformance",rows:y},{title:"TopPerformers",rows:b},{title:"RecentActivities",rows:g}];if(e==="csv"){const o=d.map(t=>[`# ${t.title}`,v(t.rows)]).join(`

`);N(`operations_${l}.csv`,o)}else if(e==="excel"){const o=d.map(t=>[`# ${t.title}`,v(t.rows)]).join(`

`);N(`operations_${l}.xls`,o,"application/vnd.ms-excel")}else e==="pdf"&&alert("PDF export not yet implemented. Integrate jsPDF or a server-side report endpoint.");m(!1)},u=c.useMemo(()=>({today:{totalSales:487250,totalPayouts:142800,totalRemittances:298500,netRevenue:144450,activeTellers:12,activeCollectors:3,pendingShortages:4,shortageAmount:9800,averageTicket:145.5,transactionCount:3347},week:{totalSales:3410750,totalPayouts:999600,totalRemittances:2089125,netRevenue:1011150,activeTellers:15,activeCollectors:4,pendingShortages:12,shortageAmount:28400,averageTicket:148.2,transactionCount:23014},month:{totalSales:14843200,totalPayouts:4352960,totalRemittances:9090240,netRevenue:4400280,activeTellers:18,activeCollectors:5,pendingShortages:31,shortageAmount:67200,averageTicket:151.75,transactionCount:97789}}),[]),a=c.useMemo(()=>u[l],[u,l]),g=c.useMemo(()=>[{id:1,type:"shortage",title:"New Shortage Reported",description:"CPZ-00016 - RELANO, VIC has ₱2,500 shortage",timestamp:"15 minutes ago",icon:"⚠️",priority:"high"},{id:2,type:"payment",title:"Payment Received",description:"CPZ-00020 - SANTOS, MARIA paid ₱1,000",timestamp:"1 hour ago",icon:"💵",priority:"normal"},{id:3,type:"remittance",title:"Remittance Completed",description:"COL-01 - CRUZ, PEDRO completed collection",timestamp:"2 hours ago",icon:"✅",priority:"normal"},{id:4,type:"ledger",title:"Ledger Generated",description:"Daily ledger for Oct 19 has been generated",timestamp:"3 hours ago",icon:"📋",priority:"low"},{id:5,type:"alert",title:"High Payout Alert",description:"Area 1 payouts exceeded 35% threshold",timestamp:"4 hours ago",icon:"🔔",priority:"medium"}],[]),y=c.useMemo(()=>[{id:"AREA-01",name:"Area 1 - Downtown",sales:185400,payouts:55620,remittances:129780,tellers:5,status:"good"},{id:"AREA-02",name:"Area 2 - Uptown",sales:142300,payouts:42690,remittances:99610,tellers:4,status:"good"},{id:"AREA-03",name:"Area 3 - Eastside",sales:98550,payouts:29565,remittances:68985,tellers:3,status:"warning"}],[]),b=c.useMemo(()=>[{rank:1,name:"CPZ-00016 - RELANO, VIC",sales:45200,efficiency:98.5},{rank:2,name:"CPZ-00020 - SANTOS, MARIA",sales:42800,efficiency:97.2},{rank:3,name:"CPZ-00025 - REYES, ANA",sales:38500,efficiency:96.8},{rank:4,name:"CPZ-00031 - GARCIA, PEDRO",sales:35900,efficiency:95.5},{rank:5,name:"CPZ-00042 - LOPEZ, MARIA",sales:33700,efficiency:94.9}],[]),n=e=>`₱${e.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,E=e=>e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),D=e=>e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),L=e=>({high:"priority-high",medium:"priority-medium",normal:"priority-normal",low:"priority-low"})[e]||"priority-normal",O=e=>({good:"status-good",warning:"status-warning",danger:"status-danger"})[e]||"status-good";return s.jsxs("div",{className:"os-dashboard-container os-compact",children:[s.jsxs("header",{className:"os-dashboard-header",children:[s.jsxs("div",{className:"os-dashboard-header-main",children:[s.jsx("div",{className:"os-dashboard-icon",children:"📊"}),s.jsxs("div",{children:[s.jsx("h1",{className:"os-dashboard-title",children:"Operations Dashboard"}),s.jsx("p",{className:"os-dashboard-subtitle",children:"Real-time overview of operations and performance"})]})]}),s.jsx("div",{className:"os-dashboard-header-meta",children:s.jsxs("div",{className:"os-current-time",children:[s.jsx("div",{className:"os-time-display",children:E(j)}),s.jsx("div",{className:"os-date-display",children:D(j)})]})})]}),s.jsx("div",{className:"os-period-selector",children:["today","week","month"].map(e=>s.jsx("button",{className:`os-period-btn ${l===e?"active":""}`,onClick:()=>k(e),children:e==="today"?"Today":e==="week"?"This Week":"This Month"},e))}),s.jsxs("div",{className:"os-stats-grid",children:[s.jsxs("div",{className:"os-stat-card primary",children:[s.jsxs("div",{className:"os-stat-header",children:[s.jsx("span",{className:"os-stat-icon",children:"💰"}),s.jsx("span",{className:"os-stat-label",children:"Total Sales"})]}),s.jsx("div",{className:"os-stat-value",children:n(a.totalSales)}),s.jsxs("div",{className:"os-stat-footer",children:[s.jsx("span",{className:"os-stat-trend positive",children:"↑ 12.5%"}),s.jsxs("span",{className:"os-stat-count",children:[a.transactionCount.toLocaleString()," transactions"]})]})]}),s.jsxs("div",{className:"os-stat-card danger",children:[s.jsxs("div",{className:"os-stat-header",children:[s.jsx("span",{className:"os-stat-icon",children:"💸"}),s.jsx("span",{className:"os-stat-label",children:"Total Payouts"})]}),s.jsx("div",{className:"os-stat-value",children:n(a.totalPayouts)}),s.jsxs("div",{className:"os-stat-footer",children:[s.jsx("span",{className:"os-stat-trend negative",children:"↓ 3.2%"}),s.jsxs("span",{className:"os-stat-count",children:[(a.totalPayouts/a.totalSales*100).toFixed(1),"% of sales"]})]})]}),s.jsxs("div",{className:"os-stat-card success",children:[s.jsxs("div",{className:"os-stat-header",children:[s.jsx("span",{className:"os-stat-icon",children:"🏦"}),s.jsx("span",{className:"os-stat-label",children:"Total Remittances"})]}),s.jsx("div",{className:"os-stat-value",children:n(a.totalRemittances)}),s.jsxs("div",{className:"os-stat-footer",children:[s.jsx("span",{className:"os-stat-trend positive",children:"↑ 8.7%"}),s.jsxs("span",{className:"os-stat-count",children:[(a.totalRemittances/a.totalSales*100).toFixed(1),"% of sales"]})]})]}),s.jsxs("div",{className:"os-stat-card accent",children:[s.jsxs("div",{className:"os-stat-header",children:[s.jsx("span",{className:"os-stat-icon",children:"📈"}),s.jsx("span",{className:"os-stat-label",children:"Net Revenue"})]}),s.jsx("div",{className:"os-stat-value",children:n(a.netRevenue)}),s.jsxs("div",{className:"os-stat-footer",children:[s.jsx("span",{className:"os-stat-trend positive",children:"↑ 15.3%"}),s.jsxs("span",{className:"os-stat-count",children:[(a.netRevenue/a.totalSales*100).toFixed(1),"% margin"]})]})]})]}),s.jsxs("div",{className:"os-secondary-stats",children:[s.jsxs("div",{className:"os-secondary-stat-card",children:[s.jsx("span",{className:"os-secondary-icon",children:"👥"}),s.jsxs("div",{className:"os-secondary-content",children:[s.jsx("div",{className:"os-secondary-value",children:a.activeTellers}),s.jsx("div",{className:"os-secondary-label",children:"Active Tellers"})]})]}),s.jsxs("div",{className:"os-secondary-stat-card",children:[s.jsx("span",{className:"os-secondary-icon",children:"🚚"}),s.jsxs("div",{className:"os-secondary-content",children:[s.jsx("div",{className:"os-secondary-value",children:a.activeCollectors}),s.jsx("div",{className:"os-secondary-label",children:"Active Collectors"})]})]}),s.jsxs("div",{className:"os-secondary-stat-card warning",children:[s.jsx("span",{className:"os-secondary-icon",children:"⚠️"}),s.jsxs("div",{className:"os-secondary-content",children:[s.jsx("div",{className:"os-secondary-value",children:a.pendingShortages}),s.jsx("div",{className:"os-secondary-label",children:"Pending Shortages"})]})]}),s.jsxs("div",{className:"os-secondary-stat-card danger",children:[s.jsx("span",{className:"os-secondary-icon",children:"💔"}),s.jsxs("div",{className:"os-secondary-content",children:[s.jsx("div",{className:"os-secondary-value",children:n(a.shortageAmount)}),s.jsx("div",{className:"os-secondary-label",children:"Shortage Amount"})]})]})]}),s.jsxs("div",{className:"os-dashboard-grid",children:[s.jsxs("div",{className:"os-dashboard-card os-activities-card",children:[s.jsxs("div",{className:"os-card-header",children:[s.jsx("h2",{className:"os-card-title",children:"Recent Activities"}),s.jsx("button",{className:"os-card-action",onClick:A,children:"View All"})]}),s.jsx("div",{className:"os-card-content",children:s.jsx("div",{className:"os-activities-list",children:g.map(e=>s.jsxs("div",{className:`os-activity-item ${L(e.priority)}`,children:[s.jsx("span",{className:"os-activity-icon",children:e.icon}),s.jsxs("div",{className:"os-activity-content",children:[s.jsx("div",{className:"os-activity-title",children:e.title}),s.jsx("div",{className:"os-activity-description",children:e.description}),s.jsx("div",{className:"os-activity-timestamp",children:e.timestamp})]})]},e.id))})})]}),s.jsxs("div",{className:"os-dashboard-card os-areas-card",children:[s.jsxs("div",{className:"os-card-header",children:[s.jsx("h2",{className:"os-card-title",children:"Area Performance"}),s.jsx("button",{className:"os-card-action",onClick:w,children:"Details"})]}),s.jsx("div",{className:"os-card-content",children:s.jsx("div",{className:"os-areas-list",children:y.map(e=>s.jsxs("div",{className:"os-area-item",onClick:()=>r(`/operation-support/areas/${e.id}`,"Opening area..."),style:{cursor:"pointer"},children:[s.jsxs("div",{className:"os-area-header",children:[s.jsx("div",{className:"os-area-name",children:e.name}),s.jsx("span",{className:`os-area-status ${O(e.status)}`,children:e.status})]}),s.jsxs("div",{className:"os-area-stats",children:[s.jsxs("div",{className:"os-area-stat",children:[s.jsx("span",{className:"os-area-stat-label",children:"Sales"}),s.jsx("span",{className:"os-area-stat-value",children:n(e.sales)})]}),s.jsxs("div",{className:"os-area-stat",children:[s.jsx("span",{className:"os-area-stat-label",children:"Payouts"}),s.jsx("span",{className:"os-area-stat-value danger",children:n(e.payouts)})]}),s.jsxs("div",{className:"os-area-stat",children:[s.jsx("span",{className:"os-area-stat-label",children:"Remittances"}),s.jsx("span",{className:"os-area-stat-value success",children:n(e.remittances)})]})]}),s.jsxs("div",{className:"os-area-footer",children:[s.jsxs("span",{className:"os-area-tellers",children:["👥 ",e.tellers," Tellers"]}),s.jsxs("span",{className:"os-area-payout-rate",children:[(e.payouts/e.sales*100).toFixed(1),"% payout rate"]})]})]},e.id))})})]}),s.jsxs("div",{className:"os-dashboard-card os-performers-card",children:[s.jsxs("div",{className:"os-card-header",children:[s.jsx("h2",{className:"os-card-title",children:"Top Performers"}),s.jsx("button",{className:"os-card-action",onClick:P,children:"Leaderboard"})]}),s.jsx("div",{className:"os-card-content",children:s.jsx("div",{className:"os-performers-list",children:b.map(e=>s.jsxs("div",{className:"os-performer-item",onClick:()=>r(`/operation-support/agents/${encodeURIComponent(e.name)}`,"Opening performer..."),style:{cursor:"pointer"},children:[s.jsx("div",{className:`os-performer-rank rank-${e.rank}`,children:e.rank===1?"🥇":e.rank===2?"🥈":e.rank===3?"🥉":e.rank}),s.jsxs("div",{className:"os-performer-content",children:[s.jsx("div",{className:"os-performer-name",children:e.name}),s.jsxs("div",{className:"os-performer-stats",children:[s.jsx("span",{className:"os-performer-sales",children:n(e.sales)}),s.jsxs("span",{className:"os-performer-efficiency",children:[e.efficiency,"% efficiency"]})]})]})]},e.rank))})})]}),s.jsxs("div",{className:"os-dashboard-card os-actions-card",children:[s.jsx("div",{className:"os-card-header",children:s.jsx("h2",{className:"os-card-title",children:"Quick Actions"})}),s.jsx("div",{className:"os-card-content",children:s.jsxs("div",{className:"os-quick-actions",children:[s.jsxs("button",{className:"os-quick-action-btn",onClick:S,children:[s.jsx("span",{className:"os-quick-action-icon",children:"📋"}),s.jsx("span",{className:"os-quick-action-label",children:"Generate Ledger"})]}),s.jsxs("button",{className:"os-quick-action-btn",onClick:R,children:[s.jsx("span",{className:"os-quick-action-icon",children:"💰"}),s.jsx("span",{className:"os-quick-action-label",children:"View Shortages"})]}),s.jsxs("button",{className:"os-quick-action-btn",onClick:T,children:[s.jsx("span",{className:"os-quick-action-icon",children:"📊"}),s.jsx("span",{className:"os-quick-action-label",children:"Export Report"})]})]})})]})]}),C&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"os-modal-overlay",onClick:()=>m(!1)}),s.jsxs("div",{className:"os-modal",children:[s.jsxs("div",{className:"os-modal-header",children:[s.jsx("h3",{className:"os-modal-title",children:"Export Report"}),s.jsx("button",{className:"os-modal-close",onClick:()=>m(!1),children:"×"})]}),s.jsxs("div",{className:"os-modal-body",children:[s.jsxs("p",{className:"os-modal-description",children:["Choose export format for the ",l," report:"]}),s.jsxs("div",{className:"os-export-options",children:[s.jsxs("button",{className:"os-export-btn",onClick:()=>p("pdf"),children:[s.jsx("span",{className:"os-export-icon",children:"📄"}),s.jsx("span",{className:"os-export-label",children:"PDF Document"})]}),s.jsxs("button",{className:"os-export-btn",onClick:()=>p("excel"),children:[s.jsx("span",{className:"os-export-icon",children:"📊"}),s.jsx("span",{className:"os-export-label",children:"Excel Spreadsheet"})]}),s.jsxs("button",{className:"os-export-btn",onClick:()=>p("csv"),children:[s.jsx("span",{className:"os-export-icon",children:"📋"}),s.jsx("span",{className:"os-export-label",children:"CSV File"})]})]})]}),s.jsx("div",{className:"os-modal-footer",children:s.jsx("button",{className:"os-btn-secondary",onClick:()=>m(!1),children:"Cancel"})})]})]})]})};export{q as default};
