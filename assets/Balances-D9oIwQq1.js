import{r as t,j as s}from"./index-DVPZBxee.js";const I=()=>[{id:"SH001",name:"Juan Dela Cruz",role:"Teller",roleId:"TEL-002",location:"Quezon City - Cubao",date:"Oct 19, 2025",totalSales:67e3,totalPayouts:18e3,expectedRemittance:49e3,actualRemittance:48500,shortageAmount:500,status:"unpaid",phone:"0917-234-5678",lastContact:null,followUpDate:null,notes:"",priority:"medium",daysOverdue:1,paidAmount:0},{id:"SH002",name:"Pedro Reyes",role:"Collector",roleId:"COL-003",location:"Manila - Tondo",date:"Oct 19, 2025",totalSales:125e3,totalPayouts:35e3,expectedRemittance:9e4,actualRemittance:85e3,shortageAmount:5e3,status:"unpaid",phone:"0915-987-6543",lastContact:null,followUpDate:null,notes:"",priority:"high",daysOverdue:1,paidAmount:0},{id:"SH003",name:"Maria Santos",role:"Teller",roleId:"TEL-005",location:"Quezon City - Fairview",date:"Oct 19, 2025",totalSales:89e3,totalPayouts:22e3,expectedRemittance:67e3,actualRemittance:65200,shortageAmount:1800,status:"partial",phone:"0917-456-7890",lastContact:"Oct 20, 2025 - 9:30 AM",followUpDate:"Oct 21, 2025",notes:"Promised to pay ₱1,000 today, remaining ₱800 tomorrow",priority:"medium",daysOverdue:1,paidAmount:0},{id:"SH004",name:"Ana Reyes",role:"Teller",roleId:"TEL-008",location:"Pasig - Ortigas",date:"Oct 19, 2025",totalSales:95e3,totalPayouts:28e3,expectedRemittance:67e3,actualRemittance:64500,shortageAmount:2500,status:"unpaid",phone:"0917-345-6789",lastContact:null,followUpDate:null,notes:"",priority:"high",daysOverdue:1,paidAmount:0}],Q=()=>{const[i,C]=t.useState(I()),[m,R]=t.useState(""),[x,L]=t.useState("all"),[p,D]=t.useState("all"),[T,g]=t.useState(!1),[k,S]=t.useState(!1),[e,j]=t.useState(null),[u,N]=t.useState(""),[f,v]=t.useState(""),[d,y]=t.useState(""),[A,b]=t.useState(""),r={totalShortages:i.length,totalAmount:i.reduce((a,o)=>a+o.shortageAmount,0),unpaidCount:i.filter(a=>a.status==="unpaid").length,partialCount:i.filter(a=>a.status==="partial").length,tellersShort:i.filter(a=>a.role==="Teller").length,collectorsShort:i.filter(a=>a.role==="Collector").length},l=a=>`₱${a.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,O=a=>({unpaid:"Unpaid",partial:"Partial Payment",paid:"Paid"})[a]||"Unpaid",w=i.filter(a=>{const o=a.name.toLowerCase().includes(m.toLowerCase())||a.roleId.toLowerCase().includes(m.toLowerCase())||a.location.toLowerCase().includes(m.toLowerCase()),c=x==="all"||a.status===x,h=p==="all"||a.role===p;return o&&c&&h}),U=a=>{j(a),N(""),v(""),g(!0)},M=a=>{j(a),y(a.shortageAmount.toString()),b(""),S(!0)},n=()=>{g(!1),S(!1),j(null),N(""),v(""),y(""),b("")},F=()=>{!e||!u.trim()||(C(a=>a.map(o=>o.id===e.id?{...o,lastContact:new Date().toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),followUpDate:f,notes:u}:o)),n())},E=()=>{if(!e||!d)return;const a=parseFloat(d);isNaN(a)||a<=0||(C(o=>o.map(c=>{if(c.id===e.id){const h=(c.paidAmount||0)+a,P=c.shortageAmount-h;return{...c,paidAmount:h,shortageAmount:Math.max(0,P),status:P<=0?"paid":"partial",notes:A||c.notes}}return c})),n())};return s.jsxs("div",{className:"os-balances-container",children:[s.jsx("div",{className:"os-balances-header",children:s.jsxs("div",{className:"os-balances-header-main",children:[s.jsx("div",{className:"os-balances-icon",children:"💰"}),s.jsxs("div",{children:[s.jsx("h1",{className:"os-balances-title",children:"Yesterday's Shortages"}),s.jsx("p",{className:"os-balances-subtitle",children:"Track and manage remittance shortages from October 19, 2025"})]})]})}),s.jsxs("div",{className:"os-stats-grid",children:[s.jsxs("div",{className:"os-stat-card",children:[s.jsx("div",{className:"os-stat-label",children:"Total Shortages"}),s.jsx("div",{className:"os-stat-value total",children:r.totalShortages})]}),s.jsxs("div",{className:"os-stat-card",children:[s.jsx("div",{className:"os-stat-label",children:"Total Amount"}),s.jsx("div",{className:"os-stat-value amount",children:l(r.totalAmount)})]}),s.jsxs("div",{className:"os-stat-card",children:[s.jsx("div",{className:"os-stat-label",children:"Unpaid"}),s.jsx("div",{className:"os-stat-value unpaid",children:r.unpaidCount})]}),s.jsxs("div",{className:"os-stat-card",children:[s.jsx("div",{className:"os-stat-label",children:"Partial Paid"}),s.jsx("div",{className:"os-stat-value partial",children:r.partialCount})]})]}),s.jsxs("div",{className:"os-balances-card",children:[s.jsxs("div",{className:"os-balances-filters",children:[s.jsxs("div",{className:"os-search-wrapper",children:[s.jsx("span",{className:"os-search-icon",children:"🔍"}),s.jsx("input",{type:"text",className:"os-search-input",placeholder:"Search by name, ID, or location...",value:m,onChange:a=>R(a.target.value)})]}),s.jsxs("select",{className:"os-filter-select",value:p,onChange:a=>D(a.target.value),children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsxs("option",{value:"Teller",children:["Tellers (",r.tellersShort,")"]}),s.jsxs("option",{value:"Collector",children:["Collectors (",r.collectorsShort,")"]})]}),s.jsxs("select",{className:"os-filter-select",value:x,onChange:a=>L(a.target.value),children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"unpaid",children:"Unpaid"}),s.jsx("option",{value:"partial",children:"Partial"}),s.jsx("option",{value:"paid",children:"Paid"})]})]}),s.jsx("div",{className:"os-balances-content",children:w.length===0?s.jsxs("div",{className:"os-empty-state",children:[s.jsx("span",{className:"os-empty-icon",children:"📋"}),s.jsx("p",{className:"os-empty-text",children:"No shortages found"})]}):s.jsx("div",{className:"os-shortage-list",children:w.map(a=>s.jsxs("div",{className:`os-shortage-item ${a.status}`,children:[s.jsxs("div",{className:"os-shortage-header",children:[s.jsxs("div",{className:"os-shortage-info",children:[s.jsx("div",{className:"os-shortage-name",children:a.name}),s.jsxs("div",{className:"os-shortage-meta",children:[a.role," • ",a.roleId," • ",a.location]})]}),s.jsx("div",{className:`os-status-badge ${a.status}`,children:O(a.status)})]}),s.jsxs("div",{className:"os-shortage-stats",children:[s.jsxs("div",{className:"os-stat-item",children:[s.jsx("div",{className:"os-stat-item-label",children:"Total Sales"}),s.jsx("div",{className:"os-stat-item-value",children:l(a.totalSales)})]}),s.jsxs("div",{className:"os-stat-item",children:[s.jsx("div",{className:"os-stat-item-label",children:"Payouts"}),s.jsx("div",{className:"os-stat-item-value",children:l(a.totalPayouts)})]}),s.jsxs("div",{className:"os-stat-item",children:[s.jsx("div",{className:"os-stat-item-label",children:"Expected"}),s.jsx("div",{className:"os-stat-item-value",children:l(a.expectedRemittance)})]}),s.jsxs("div",{className:"os-stat-item",children:[s.jsx("div",{className:"os-stat-item-label",children:"Actual"}),s.jsx("div",{className:"os-stat-item-value highlight",children:l(a.actualRemittance)})]})]}),s.jsxs("div",{className:"os-shortage-amount-box",children:[s.jsxs("div",{className:"os-shortage-amount-row",children:[s.jsx("span",{className:"os-shortage-amount-label",children:"Shortage Amount:"}),s.jsx("span",{className:"os-shortage-amount-value",children:l(a.shortageAmount)})]}),a.paidAmount>0&&s.jsxs("div",{className:"os-shortage-amount-row",children:[s.jsx("span",{className:"os-shortage-amount-label small",children:"Paid Amount:"}),s.jsx("span",{className:"os-shortage-amount-value paid",children:l(a.paidAmount)})]})]}),s.jsxs("div",{className:"os-contact-info",children:[s.jsx("span",{className:"os-contact-icon",children:"📱"}),s.jsx("span",{className:"os-contact-phone",children:a.phone})]}),(a.notes||a.lastContact||a.followUpDate)&&s.jsxs("div",{className:"os-notes-section",children:[a.lastContact&&s.jsxs("div",{className:"os-note-item",children:[s.jsx("strong",{children:"Last Contact:"})," ",a.lastContact]}),a.followUpDate&&s.jsxs("div",{className:"os-note-item",children:[s.jsx("strong",{children:"Follow-up:"})," ",a.followUpDate]}),a.notes&&s.jsxs("div",{className:"os-note-item main",children:[s.jsx("strong",{children:"Notes:"})," ",a.notes]})]}),s.jsxs("div",{className:"os-shortage-actions",children:[s.jsxs("button",{className:"os-btn os-btn-contact",onClick:()=>U(a),children:[s.jsx("span",{children:"📞"}),s.jsx("span",{children:"Log Contact"})]}),a.status!=="paid"&&s.jsxs("button",{className:"os-btn os-btn-payment",onClick:()=>M(a),children:[s.jsx("span",{children:"💵"}),s.jsx("span",{children:"Record Payment"})]})]})]},a.id))})})]}),T&&e&&s.jsx("div",{className:"os-modal-overlay",onClick:n,children:s.jsxs("div",{className:"os-modal",onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:"os-modal-header",children:[s.jsxs("h3",{className:"os-modal-title",children:["Log Contact - ",e.name]}),s.jsx("button",{className:"os-modal-close",onClick:n,children:"×"})]}),s.jsxs("div",{className:"os-modal-body",children:[s.jsxs("div",{className:"os-form-group",children:[s.jsx("label",{className:"os-form-label",children:"Contact Notes *"}),s.jsx("textarea",{className:"os-form-textarea",value:u,onChange:a=>N(a.target.value),placeholder:"What did you discuss? Any commitments made?",rows:4})]}),s.jsxs("div",{className:"os-form-group",children:[s.jsx("label",{className:"os-form-label",children:"Follow-up Date"}),s.jsx("input",{type:"date",className:"os-form-input",value:f,onChange:a=>v(a.target.value)}),s.jsx("p",{className:"os-form-help",children:"Set a reminder date for next follow-up"})]})]}),s.jsxs("div",{className:"os-modal-footer",children:[s.jsx("button",{className:"os-btn-secondary",onClick:n,children:"Cancel"}),s.jsx("button",{className:"os-btn-primary",onClick:F,disabled:!u.trim(),children:"Save Notes"})]})]})}),k&&e&&s.jsx("div",{className:"os-modal-overlay",onClick:n,children:s.jsxs("div",{className:"os-modal",onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:"os-modal-header",children:[s.jsxs("h3",{className:"os-modal-title",children:["Record Payment - ",e.name]}),s.jsx("button",{className:"os-modal-close",onClick:n,children:"×"})]}),s.jsxs("div",{className:"os-modal-body",children:[s.jsxs("div",{className:"os-summary-box",children:[s.jsxs("div",{className:"os-summary-row",children:[s.jsx("span",{className:"os-summary-label",children:"Total Shortage:"}),s.jsx("span",{className:"os-summary-value danger",children:l(e.shortageAmount+(e.paidAmount||0))})]}),e.paidAmount>0&&s.jsxs("div",{className:"os-summary-row",children:[s.jsx("span",{className:"os-summary-label",children:"Already Paid:"}),s.jsx("span",{className:"os-summary-value success",children:l(e.paidAmount)})]}),s.jsxs("div",{className:"os-summary-row",children:[s.jsx("span",{className:"os-summary-label strong",children:"Remaining:"}),s.jsx("span",{className:"os-summary-value primary",children:l(e.shortageAmount)})]})]}),s.jsxs("div",{className:"os-form-group",children:[s.jsx("label",{className:"os-form-label",children:"Payment Amount *"}),s.jsx("input",{type:"number",className:"os-form-input",value:d,onChange:a=>y(a.target.value),placeholder:"0.00",min:"0",step:"0.01"}),s.jsx("p",{className:"os-form-help",children:"Enter the amount being paid today"})]}),s.jsxs("div",{className:"os-form-group",children:[s.jsx("label",{className:"os-form-label",children:"Payment Notes"}),s.jsx("textarea",{className:"os-form-textarea",value:A,onChange:a=>b(a.target.value),placeholder:"Optional: Add any notes about this payment",rows:3})]})]}),s.jsxs("div",{className:"os-modal-footer",children:[s.jsx("button",{className:"os-btn-secondary",onClick:n,children:"Cancel"}),s.jsx("button",{className:"os-btn-success",onClick:E,disabled:!d||parseFloat(d)<=0,children:"Record Payment"})]})]})})]})};export{Q as default};
